{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/msa-dockerizing-improve/",
    "result": {"data":{"cur":{"id":"db3ff623-33be-583f-8fdd-538cef41901f","html":"<p>ì§€ì ê³¼ ëŒ“ê¸€ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤!</p>\n<br>\n<hr>\n<h1 id=\"ë„ì»¤-ì‚½ì§ˆ-ê°œì„ í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4-%EC%82%BD%EC%A7%88-%EA%B0%9C%EC%84%A0%ED%95%98%EA%B8%B0\" aria-label=\"ë„ì»¤ ì‚½ì§ˆ ê°œì„ í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë„ì»¤ ì‚½ì§ˆ ê°œì„ í•˜ê¸°</h1>\n<br>\n<h2 id=\"ì´ì „í¸-ìš”ì•½\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%A0%84%ED%8E%B8-%EC%9A%94%EC%95%BD\" aria-label=\"ì´ì „í¸ ìš”ì•½ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì´ì „í¸ ìš”ì•½</h2>\n<p>ì´ì „ í¸ <code class=\"language-text\">ë„ì»¤ ì‚½ì§ˆí•˜ê¸°</code> ì—ì„œëŠ” ë‹¨ìˆœ ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•´ì„œ</p>\n<p>ì§ì ‘ ëª…ë ¹ì–´ë¥¼ íƒ€ì´í•‘í•˜ë©´ì„œ, ì»¨í…Œì´ë„ˆì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ì˜€ë‹¤.</p>\n<br>\n<p>ê·¸ ê²°ê³¼, ì»¨í…Œì´ë„ˆê°€ ì¬ë¶€íŒ…ë˜ë©´ ëŒ€ë¶€ë¶„ì˜ ë°ì´í„°ì™€ ìƒíƒœê°€ ì†Œì‹¤ë˜ì–´</p>\n<p>ê°™ì€ ê³¼ì •ì„ ë°˜ë³µí•´ì•¼ í–ˆë‹¤.</p>\n<br>\n<hr>\n<br>\n<h2 id=\"ëª©í‘œ\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"ëª©í‘œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ëª©í‘œ</h2>\n<p>ë„ì»¤ ì»¨í…Œì´ë„ˆ ì„¤ì •ì„ ê°„ì†Œí™”, ìë™í™”í•´ë³´ì</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACf0lEQVQoz22Sy09TQRSH+6/4v7gyJorGnRFNDEskutBERBGjxI1gdQGEiFHBBykg7/JGKPRFS6EiLfRBW/ru7W2hpb2PT9tb0IW/ZOaczJz5zpyZo0tFDzH2dOCcGaUiVVFQVVXzVfXMD4fC7Pg2OC7mqAVWpqr9N17nGhtAf/sKC+MaUFEUZFUbkiJXbUWvX7bzpKOBeNKDtGclYZsgYZ8m6zSiZA9RToHNX0ycuz/Izb41VEXifwpG4+i7ehiamgO5RMmzSnh9HO/SMPmtORDCtUgV3fxOlFH7Psl0proUKwpMxTcwJpxMxOzYsnsUikUcDgexeLR6SHLPkFgxsG38juocRoxH2IwUSOVL6KqQRA4VrbSvhz84v9JCnaWdC2tt3LB1IspHBCNHuPxH7HsC5L49ROy/hzDwgGJ/I0HLLC9mE1h8WQ3o8GZx+bL4gid0bs9St/yUa9NtXJ56TIPjDYKco5JPKKikwwfkB5sJ9Dax29VI8n0Ti+NGno36sPsFDSjJCmKhhFSE7r05LprauLrQxqXFVurNb9lLpzg+lsmXQIxFSAw8IvqukYPeOxx/asK1MMnzyRA2n4Du9MurLQDMJBxc33jFLXM39Q49d9f72fCm+OnPsu0X2dyJETDoyRlaiQ62I4+0cOAyo19O4gyK2g0rUKUGDhVSjEXMfHCu8dW7iklwnyXTJEHQSsQ2z65pkZNfS5RzKcQTlbKkaMBq/9WArlyAPo+RLouBLusQw+F18uVilVn5NqWQp7A1i3/+M7vTH8lYRlBTgb9tcwo8LT1azGARvFjTXixpD1tikLIinz2KKpWQYx7KYTcnITdyxI1ylNH2/jT2b6+3Db80o/CtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"msa\"\n        title=\"msa\"\n        src=\"/static/c4fef21cd9c5f1b37ad7342abc8dbf37/37523/msa.png\"\n        srcset=\"/static/c4fef21cd9c5f1b37ad7342abc8dbf37/e9ff0/msa.png 180w,\n/static/c4fef21cd9c5f1b37ad7342abc8dbf37/f21e7/msa.png 360w,\n/static/c4fef21cd9c5f1b37ad7342abc8dbf37/37523/msa.png 720w,\n/static/c4fef21cd9c5f1b37ad7342abc8dbf37/302a4/msa.png 1080w,\n/static/c4fef21cd9c5f1b37ad7342abc8dbf37/5d942/msa.png 1343w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>ê³µí†µ ì„¤ì • ë¶„ë¦¬ â†’ env íŒŒì¼ ìƒì„±</p>\n</li>\n<li>\n<p>DBì— ëŒ€í•œ dockerfile ì‘ì„± â†’ ì´ë¯¸ì§€ ìƒì„±</p>\n</li>\n<li>\n<p>Package(ì„œë¸Œë„ë©”ì¸B, ì§€ì›ë„ë©”ì¸D)ì— ëŒ€í•œ dockerfile ì‘ì„± â†’ ì´ë¯¸ì§€ ìƒì„±</p>\n</li>\n<li>\n<p>docker-composeë¥¼ ì´ìš©í•´ì„œ ì‹¤í–‰</p>\n</li>\n</ul>\n<br>\n<hr>\n<h2 id=\"ì—¬ì •\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EC%A0%95\" aria-label=\"ì—¬ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì—¬ì •</h2>\n<ol>\n<li>\n<p>env íŒŒì¼ë¡œ ì„¤ì • ë¶„ë¦¬</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\"># DB Configuration</span>\nTZ=Asia/Seoul\nDB_HOST=0.0.0.0 # ì™¸ë¶€ DBì™€ ì—°ê²°í•˜ê³  ì‹¶ì„ ë•Œ DB IP ì…ë ¥\nDB_KIND=postgresql # oracle, tibero\nDB_NAME=sf1_db\nDB_SCHEMA_NAME=sf1_schema\nDB_USER=postgres\nDB_PASSWORD=0000\nDB_PORT_IN=5432\nDB_PORT_OUT=5432\n\n<span class=\"token comment\"># Manager Configuration</span>\nMANAGER_IP=0.0.0.0 # ê´€ë¦¬ë„êµ¬ë¥¼ ì‹¤í–‰í•  í˜¸ìŠ¤íŠ¸ì˜ IPë¡œ ë³€ê²½\nMANAGER_NAME=manager1\nMANAGER_PORT_IN=8080\nMANAGER_PORT_OUT=8080\n\n<span class=\"token comment\"># ServiceKit Configuration</span>\nSERVICEKIT_NAME=kit1\nSERVICEKIT_PORT_IN=8888\nSERVICEKIT_PORT_OUT=8888\nSERVICEKIT_CACHE_PORT_IN=8900\nSERVICEKIT_CACHE_PORT_OUT=8900</code></pre></div>\n</li>\n<li>\n<p>Managerì— ëŒ€í•œ dockerfile ì‘ì„±</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># database.properties ì„¤ì •íŒŒì¼ ì˜ˆì‹œ</span>\n\nschema.name=$<span class=\"token punctuation\">{</span>DB_SCHEMA_NAME<span class=\"token punctuation\">}</span>\nspring.datasource.username=$<span class=\"token punctuation\">{</span>DB_USER<span class=\"token punctuation\">}</span>\nspring.datasource.password=$<span class=\"token punctuation\">{</span>DB_PASSWORD<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># Postgresql</span>\nspring.datasource.url=jdbc<span class=\"token punctuation\">:</span>postgresql<span class=\"token punctuation\">:</span>//$<span class=\"token punctuation\">{</span>DB_HOST<span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span>$<span class=\"token punctuation\">{</span>DB_PORT<span class=\"token punctuation\">}</span>/$<span class=\"token punctuation\">{</span>DB_NAME<span class=\"token punctuation\">}</span><span class=\"token punctuation\">?</span>useUnicode=true<span class=\"token important\">&amp;characterEncoding=utf8&amp;currentSchema=$</span><span class=\"token punctuation\">{</span>DB_SCHEMA_NAME<span class=\"token punctuation\">}</span>\nspring.datasource.driver<span class=\"token punctuation\">-</span>class<span class=\"token punctuation\">-</span>name=org.postgresql.Driver\nspring.jpa.hibernate.dialect=org.hibernate.dialect.PostgreSQL10Dialect</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\"># APPLICATION</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> openjdk:8-jdk-alpine</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> APPNAME sf-1-v7-manager</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> WORKDIR /home/<span class=\"token variable\">$APPNAME</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> <span class=\"token variable\">$WORKDIR</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> ./target/lib <span class=\"token variable\">$WORKDIR</span>/lib</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> ./conf <span class=\"token variable\">$WORKDIR</span>/conf</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span>  ./target/sf-1-manager-7.1.0.jar <span class=\"token variable\">$WORKDIR</span>/lib/sf-1-manager-7.1.0.jar</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ENTRYPOINT</span> [ <span class=\"token string\">\"java\"</span>,  <span class=\"token string\">\"-Dlogging.level.kr.co.wisenut=info\"</span>, <span class=\"token string\">\"-Dfile.encoding=UTF-8\"</span>, <span class=\"token string\">\"-Xms1G\"</span>, <span class=\"token string\">\"-Xmx4G\"</span>, <span class=\"token string\">\"-XX:+UseG1GC\"</span>,<span class=\"token string\">\"-cp\"</span>, <span class=\"token string\">\"/home/sf-1-v7-manager/lib/*\"</span>, <span class=\"token string\">\"-Dsf1.manager.path=./\"</span>,  <span class=\"token string\">\"-DLOG_PATH=./log\"</span>,  <span class=\"token string\">\"-Dspring.config.location=./conf/application.properties\"</span> , <span class=\"token string\">\"kr.co.wisenut.manager.sf1.SearchManagerApplication\"</span>, <span class=\"token string\">\"$NODENAME\"</span>, <span class=\"token string\">\"start\"</span> ]</span></code></pre></div>\n</li>\n<li>\n<p>ServiceKitì— ëŒ€í•œ dockerfile ì‘ì„±</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\"># ServiceKit</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> openjdk:8-jdk-alpine</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> APPNAME sf-1-v7-servicekit</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> WORKDIR /home/<span class=\"token variable\">$APPNAME</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> <span class=\"token variable\">$WORKDIR</span></span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> ark  <span class=\"token variable\">$WORKDIR</span>/ark</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> conf <span class=\"token variable\">$WORKDIR</span>/conf</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> ./target/servicekit-7.1.0.jar <span class=\"token variable\">$WORKDIR</span>/app.jar</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ENTRYPOINT</span> [<span class=\"token string\">\"java\"</span>, <span class=\"token string\">\"-Dsf1.servicekit.path=./\"</span>, <span class=\"token string\">\"-Dlogging.path=./log\"</span>, <span class=\"token string\">\"-cp\"</span>, <span class=\"token string\">\"'ark/classes/*;ark/classes/lib/*'\"</span>, <span class=\"token string\">\"-jar\"</span>, <span class=\"token string\">\"app.jar\"</span>,<span class=\"token string\">\"$NODENAME\"</span>, <span class=\"token string\">\"start\"</span> ]</span></code></pre></div>\n</li>\n<li>\n<p>DBì— ëŒ€í•œ dockerfile ì‘ì„± ë° ì´ë¯¸ì§€ ë¹Œë“œ</p>\n<ul>\n<li>\n<p>ì»¨í…Œì´ë„ˆ ë‚´ë¶€ DB ì´ìš©í•˜ëŠ” ê²½ìš°(Docker_db íŒŒì¼)</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\"># Database</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> postgres:14</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> APPNAME DBInstaller</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> WORKDIR /home/<span class=\"token variable\">$APPNAME</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> <span class=\"token variable\">$WORKDIR</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> conf <span class=\"token variable\">$WORKDIR</span>/conf</span>\n\n<span class=\"token comment\"># íƒ€ì„ì¡´ ì„¤ì •</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> ln -snf /usr/share/zoneinfo/<span class=\"token variable\">$TZ</span> /etc/localtime <span class=\"token operator\">\\</span>\n    &amp;&amp; echo <span class=\"token variable\">$TZ</span> > /etc/timezone</span>\n\n<span class=\"token comment\"># update ë° íŒ¨í‚¤ì§€ ì„¤ì¹˜</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apt update <span class=\"token operator\">\\</span>\n    &amp;&amp; apt install -y sudo procps # openjdk-11-jdk vim git tar gzip build-essential curl alien</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> chmod 777 <span class=\"token variable\">$WORKDIR</span>/conf/init.sh <span class=\"token variable\">$WORKDIR</span>/conf/postgresql_table.sql</span>\n\n<span class=\"token comment\"># sed -i \"s/{SF1_MANAGER_SCHEMA_NAME}/$DB_SCHEMA_NAME/g\" \"$WORKDIR\"/conf/postgresql_table.sql</span>\n <span class=\"token comment\">#ENTRYPOINT su postgres $WORKDIR/conf/init.sh</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token comment\"># Create a user and a database</span>\npsql -U <span class=\"token string\">\"<span class=\"token variable\">$DB_USER</span>\"</span> -c <span class=\"token string\">\"CREATE DATABASE <span class=\"token variable\">$DB_NAME</span>;\"</span>\n\npsql -U <span class=\"token string\">\"<span class=\"token variable\">$DB_USER</span>\"</span> -d <span class=\"token string\">\"<span class=\"token variable\">$DB_NAME</span>\"</span> -c <span class=\"token string\">\"CREATE SCHEMA <span class=\"token variable\">$DB_SCHEMA_NAME</span>;\"</span>\n\n<span class=\"token comment\"># Run the SQL script to initialize the database</span>\npsql -U <span class=\"token string\">\"<span class=\"token variable\">$DB_USER</span>\"</span> -d <span class=\"token string\">\"<span class=\"token variable\">$DB_NAME</span>\"</span> -a -f <span class=\"token string\">\"<span class=\"token variable\">$WORKDIR</span>\"</span>/conf/postgresql_table.sql</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">docker build <span class=\"token punctuation\">-</span>f Dockerfile_db <span class=\"token punctuation\">-</span>t sf1_pg14<span class=\"token punctuation\">:</span>7.1.0 .</code></pre></div>\n</li>\n<li>\n<p>ì™¸ë¶€ DBë¥¼ ì—°ê²°í•˜ëŠ” ê²½ìš°</p>\n<p>â†’ Dockerfile ì‘ì„± X</p>\n<p>â†’ ì„¤ì •íŒŒì¼ì—ì„œ <code class=\"language-text\">DATABASE_HOST</code>  ì£¼ì„ì„ í’€ê³  ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰</p>\n</li>\n</ul>\n</li>\n<li>\n<p>docker-compose ì‘ì„±</p>\n<ul>\n<li>\n<p>ì»¨í…Œì´ë„ˆ ë‚´ë¶€ DB ì´ìš©í•˜ëŠ” ê²½ìš°(docker-compose.yml)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">services:\n    database:\n        image: mypg:7.1.0\n        container_name: db_instance\n        restart: unless-stopped\n        ports:\n          - <span class=\"token variable\">${DB_PORT_IN}</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">${DB_PORT_OUT}</span>\n        volumes:\n          - sf1_db_storage:/var/lib/postgresql/data\n        environment:\n          DB_KIND: <span class=\"token variable\">${DB_KIND}</span>\n          DB_NAME: <span class=\"token variable\">${DB_NAME}</span>\n          DB_SCHEMA_NAME: <span class=\"token variable\">${DB_SCHEMA_NAME}</span>\n          DB_USER: <span class=\"token variable\">${DB_USER}</span>\n          POSTGRES_PASSWORD: <span class=\"token variable\">${DB_PASSWORD}</span>\n          TZ: <span class=\"token variable\">${TZ}</span>\n        healthcheck:\n          test: <span class=\"token punctuation\">[</span><span class=\"token string\">\"CMD\"</span>, <span class=\"token string\">\"pg_isready\"</span>, <span class=\"token string\">\"-U\"</span>, <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">]</span>\n          interval: 10s\n          timeout: 3s\n          retries: <span class=\"token number\">3</span>\n\n    manager:\n        build:\n          context: <span class=\"token builtin class-name\">.</span>\n          dockerfile: Dockerfile\n        image: sf1_manager:7.1.0\n        container_name: manager\n        restart: always\n        depends_on:\n          database:\n            condition: service_healthy\n        ports:\n          - <span class=\"token variable\">${MANAGER_PORT_IN}</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">${MANAGER_PORT_OUT}</span>\n        environment:\n          NODENAME: <span class=\"token variable\">${MANAGER_NAME}</span>\n          DB_HOST: db_instance\n          DB_KIND: <span class=\"token variable\">${DB_KIND}</span>\n          DB_NAME: <span class=\"token variable\">${DB_NAME}</span>\n          DB_SCHEMA_NAME: <span class=\"token variable\">${DB_SCHEMA_NAME}</span>\n          DB_USER: <span class=\"token variable\">${DB_USER}</span>\n          DB_PASSWORD: <span class=\"token variable\">${DB_PASSWORD}</span>\n          DB_PORT: <span class=\"token variable\">${DB_PORT_OUT}</span>\n\n    servicekit:\n        image: sf1_servicekit:7.1.0\n        container_name: servicekit\n        restart: always\n        depends_on:\n          database:\n              condition: service_healthy\n        ports:\n          - <span class=\"token variable\">${SERVICEKIT_PORT_IN}</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">${SERVICEKIT_PORT_OUT}</span>\n          - <span class=\"token variable\">${SERVICEKIT_CACHE_PORT_IN}</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">${SERVICEKIT_CACHE_PORT_OUT}</span>\n        environment:\n          NODENAME: <span class=\"token variable\">${SERVICEKIT_NAME}</span>\n          DB_HOST: db_instance\n          DB_KIND: <span class=\"token variable\">${DB_KIND}</span>\n          DB_NAME: <span class=\"token variable\">${DB_NAME}</span>\n          DB_SCHEMA_NAME: <span class=\"token variable\">${DB_SCHEMA_NAME}</span>\n          DB_USER: <span class=\"token variable\">${DB_USER}</span>\n          DB_PASSWORD: <span class=\"token variable\">${DB_PASSWORD}</span>\n          DB_PORT: <span class=\"token variable\">${DB_PORT_OUT}</span>\n          MANAGER_IP: <span class=\"token variable\">${MANAGER_IP}</span>\nvolumes:\n  sf1_db_storage:\n    driver: <span class=\"token builtin class-name\">local</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\"># .env íŒŒì¼ì€ ê·¸ëƒ¥ ì‹¤í–‰í•´ë„ ì¸ì‹í•¨</span>\n<span class=\"token comment\"># --force-recreate : ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œ í›„ ì¬ìƒì„±</span>\n<span class=\"token comment\"># docker compose up -d --force-recreate</span>\n\n<span class=\"token comment\"># .env íŒŒì¼ì„ ì—¬ëŸ¬ê°œ ë§Œë“¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì‹¤í–‰</span>\ndocker-compose --env-file .\\.env.local up -d\n\n<span class=\"token comment\"># DB ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰</span>\ndocker exec -it db_instance /bin/bash\nsed -i \"s/{SF1_MANAGER_SCHEMA_NAME}/$DB_SCHEMA_NAME/g\" \"$WORKDIR\"/conf/postgresql_table.sql\nsu postgres $WORKDIR/conf/init.sh\n\n<span class=\"token comment\"># ì¢…ë£Œ</span>\ndocker compose down -v</code></pre></div>\n</li>\n<li>\n<p>ì™¸ë¶€ DBë¥¼ ì—°ê²°í•˜ëŠ” ê²½ìš°(docker-compose-external-db.yml)</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\">services:\n  manager:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    image: sf1_manager:7.1.0\n    container_name: manager\n    restart: always\n    ports:\n      - ${MANAGER_PORT_IN}:${MANAGER_PORT_OUT}\n    environment:\n      NODENAME: ${MANAGER_NAME}\n      DB_HOST: ${DB_HOST}\n      DB_KIND: ${DB_KIND}\n      DB_NAME: ${DB_NAME}\n      DB_SCHEMA_NAME: ${DB_SCHEMA_NAME}\n      DB_USER: ${DB_USER}\n      DB_PASSWORD: ${DB_PASSWORD}\n      DB_PORT: ${DB_PORT_OUT}\n\n  servicekit:\n    image: sf1_servicekit:7.1.0\n    container_name: servicekit\n    restart: always\n    ports:\n      - ${SERVICEKIT_PORT_IN}:${SERVICEKIT_PORT_OUT}\n      - ${SERVICEKIT_CACHE_PORT_IN}:${SERVICEKIT_CACHE_PORT_OUT}\n    environment:\n      NODENAME: ${SERVICEKIT_NAME}\n      DB_HOST: ${DB_HOST}\n      DB_KIND: ${DB_KIND}\n      DB_NAME: ${DB_NAME}\n      DB_SCHEMA_NAME: ${DB_SCHEMA_NAME}\n      DB_USER: ${DB_USER}\n      DB_PASSWORD: ${DB_PASSWORD}\n      DB_PORT: ${DB_PORT_OUT}\n      MANAGER_IP: ${MANAGER_IP}</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\"># 19ë²ˆ ì„¤ì •íŒŒì¼ì„ ì™¸ë¶€ DBì— ì—°ê²°í•˜ëŠ” compose ëª…ë ¹ì–´</span>\ndocker compose --env-file .\\.env.19 -f .\\docker-compose-external-db.yml up -d</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>ì¢…ë£Œí•˜ê¸°</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># ì¢…ë£Œ ë° ë³¼ë¥¨ ì‚­ì œ</span>\ndocker compose down <span class=\"token punctuation\">-</span>v</code></pre></div>\n</li>\n</ol>\n<h2 id=\"q--a\" style=\"position:relative;\"><a href=\"#q--a\" aria-label=\"q  a permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q &#x26; A</h2>\n<details>\n    <summary>DB ì»¨í…Œì´ë„ˆì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤ \n    psql: error: connection to server on socket \"/var/run/postgresql/.s.PGSQL.5432\" failed: No such file or directory</summary>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ì´ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš°ì—ëŠ” PostgreSQL ì„œë²„ê°€ ì‹¤í–‰ë˜ê³  ìˆì§€ ì•Šê±°ë‚˜ ì„œë²„ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ” ì†Œì¼“ íŒŒì¼ì´ ì—†ê¸° ë•Œë¬¸ì¼ ìˆ˜ ìˆë‹¤.\n\ní•´ê²° ë°©ë²•ìœ¼ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì„ ì‹œë„í•´ ë³¼ ìˆ˜ ìˆë‹¤:\n\n1. PostgreSQL ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ê³ , ì‹¤í–‰ ì¤‘ì´ ì•„ë‹ˆë¼ë©´ ì„œë²„ë¥¼ ì‹œì‘í•œë‹¤.\n    \n  ps aux | grep postgres\n    \n2. ì†Œì¼“ íŒŒì¼ì´ ì—†ê¸° ë•Œë¬¸ì— ì ‘ì†ì´ ì‹¤íŒ¨í•œ ê²ƒì¼ ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ, ì†Œì¼“ íŒŒì¼ì„ ìƒì„±í•´ì¤€ë‹¤.\n\n ì†Œì¼“ íŒŒì¼ì„ ìƒì„±í•˜ë ¤ë©´ **`pg_ctl`** ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. \n \n ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ì™€ ê°™ì´ ì…ë ¥í•  ìˆ˜ ìˆë‹¤:\n    \n  su postgres\n  \n  pg_ctl -w restart</code></pre></div>\n</details>\n<br>\n<details>\n    <summary>ë³¼ë¥¨ì„ ì—¬ëŸ¬ê³³ì—ì„œ ê°™ì´ ì“°ê³  ì‹¶ì–´ìš”</summary>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">volumesì„ ê³µìœ í•´ì„œ ì‚¬ìš©í• ì‹œ ì£¼ì˜í•  ì ì€ ê³µìœ í•  ë³¼ë¥¨ì˜ ì´ë¦„ì„ ì»¨í…Œì´ë„ˆì— ëª…ì‹œí•˜ëŠ” ê²ƒ ë¿ë§Œ ì•„ë‹ˆë¼ ê²½ë¡œë„ ê°™ì•„ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.\n\nnodejs ì»¨í…Œì´ë„ˆì˜ ë³¼ë¥¨ì˜ ê²½ë¡œê°€ ë§Œì•½ ì•„ë˜ì²˜ëŸ¼ ë³€ê²½ëœë‹¤ë©´\n\n- shared-data:/test/nodejs\n\ndb ì»¨í…Œì´ë„ˆì˜ ë³¼ë¥¨ì˜ ê²½ë¡œë„ ì•„ë˜ì²˜ëŸ¼ ë°”ê¿”ì¤˜ì•¼ì§€ë§Œ ê°™ì€ ë³¼ë¥¨ì„ ë‘ ì»¨í…Œì´ë„ˆì—ì„œ ë™ì‹œì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n- shared-data:/test/mysql</code></pre></div>\n</details>\n<br>\n<details>\n    <summary>í˜„ì¬ ìƒíƒœë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥í•˜ê³  ì‹¶ì–´ìš”</summary>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># í˜¸ìŠ¤íŠ¸ OSì—ì„œ\ndocker commit -m \"ë©”ì‹œì§€\" ì»¨í…Œì´ë„ˆëª… ì´ë¯¸ì§€ëª…:íƒœê·¸</code></pre></div>\n</details>\n<br>\n<details>\n    <summary>docker-compose vs docker compose, ë¬´ìŠ¨ ì°¨ì´ì¸ê°€ìš”?</summary>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker-compose : êµ¬ë²„ì „, python ê¸°ë°˜\n\ndocker compose : ì‹ ë²„ì „, Goì–¸ì–´ ê¸°ë°˜ + ì‹ ê·œ ëª…ë ¹ì–´ ì¶”ê°€\n\n(ì‹¤í–‰ ì†ë„ëŠ” ë¹„ìŠ·í•˜ë‹¤.)</code></pre></div>\n</details>\n<br>\n<details>\n    <summary>jar íŒŒì¼ ì‹¤í–‰ ì‹œ, Main Classë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤</summary>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[ì°¸ì¡°ê¸€](https://chaelin1211.github.io/study/2021/03/12/springboot-error-01.html)\n\n- Spring bootë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°\n    \n  pom.xmlì— ì•„ë˜ í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€\n    \n  &lt;plugin>\n      &lt;groupId>org.springframework.boot&lt;/groupId>\n      &lt;artifactId>spring-boot-maven-plugin&lt;/artifactId>\n  &lt;/plugin>\n    \n    \n- ìˆœìˆ˜ Javaë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°\n    \n  jar ëŒ€ì‹  warë¡œ íŒ¨í‚¤ì§•í•˜ì—¬ ì‹¤í–‰</code></pre></div>\n</details>\n<br>\n<details>\n    <summary>íŠ¹ì • íŒŒì¼ì˜ í…ìŠ¤íŠ¸ë¥¼ ì°¾ì•„ ë°”ê¾¸ê¸° í•˜ê³  ì‹¶ì–´ìš”</summary>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># file.txt íŒŒì¼ì—ì„œ \"ì°¾ì„ë‚´ìš©\"ì„ \"ë°”ê¿€ë‚´ìš©\"ìœ¼ë¡œ ì°¾ì•„ë°”ê¾¸ê¸°\n\n$ sed -i 's/ì°¾ì„ë‚´ìš©/ë°”ê¿€ë‚´ìš©/g' file.txt\n\nìì„¸í•œ ëª…ë ¹ì–´ì˜ ì„¤ëª…ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n\n-i : íŒŒì¼ì˜ ë‚´ìš©ì„ ë°”ê¿ˆ\n's' : ì°¾ì•„ë°”ê¾¸ê¸°\n'g' : ëª¨ë“  ë¬¸ìì—´ ë°”ê¾¸ê¸°</code></pre></div>\n</details>\n<br>\n<details>\n    <summary>ë„ì»¤ ì»¨í…Œì´ë„ˆì˜ ìºì‹œë¥¼ ì‚­ì œí•˜ê³  ì‹¶ì–´ìš”</summary>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker system prune --volumes</code></pre></div>\n</details>\n<br>\n<details>\n    <summary>í™˜ê²½ë³€ìˆ˜ ê°’ì´ ì„ íƒë˜ëŠ” ìš°ì„ ìˆœìœ„ëŠ” ë­”ê°€ìš”?(Compose / Dockerfile / Shell / Env)</summary>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. Compose íŒŒì¼ì— ì§ì ‘ ì…ë ¥í•œ ê°’\n2. ì‰˜ í™˜ê²½ë³€ìˆ˜ë¡œ ë“±ë¡í•œ ê°’\n3. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ë¡œ ì…ë ¥ëœ ê°’(`.env` ë“±)\n4. Dockerfileì„ í†µí•´ ì‚½ì…ëœ ê°’\n\n### **ìš°ì„ ìˆœìœ„ ê²°ì • ì˜ˆì‹œ**\n\nìš°ì„ , Dockerfileë¡œ ì•„ë˜ì™€ ê°™ì´ `seongjin_mysql`ì´ë¼ëŠ” ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí–ˆë‹¤ê³  ê°€ì •í•˜ì.\nFROM mysql:8\nENV MYSQL_ROOT_PASSWORD passwd_from_dockerfile\n\n\nê·¸ë¦¬ê³  ì‰˜ í™˜ê²½ì—ì„œ ì•„ë˜ì™€ ê°™ì´ í™˜ê²½ë³€ìˆ˜ë¥¼ ì§ì ‘ ì…ë ¥í•œë‹¤.\n$ export MYSQL_ROOT_PASSWORD=passwd_from_shell\n\n\në‹¤ìŒìœ¼ë¡œëŠ” `.env` íŒŒì¼ì„ ë§Œë“¤ì–´ ì•„ë˜ì™€ ê°™ì´ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í–ˆë‹¤ê³  ì¹˜ì.\nMYSQL_ROOT_PASSWORD=passwd_from_envfile\n\n\në§ˆì§€ë§‰ìœ¼ë¡œ ë°°í¬ìš© `YAML`ì€ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í–ˆë‹¤ê³  ê°€ì •í•œë‹¤.\nversion: '3.9'\nservices:\n  mysql:\n    image: seongjin_mysql\n    restart: unless-stopped\n    environment:\n      MYSQL_ROOT_PASSWORD: passwd_from_yaml\n\n\nì´ëŸ¬í•œ í™˜ê²½ì—ì„œ `docker compose up`ì„ ì‹¤í–‰í–ˆì„ ë•Œ, í•´ë‹¹ ì„œë¹„ìŠ¤(ì»¨í…Œì´ë„ˆ)ì— ì ìš©ëœ í™˜ê²½ë³€ìˆ˜ `MYSQL_ROOT_PASSWORD`ì˜ ìµœì¢…ê°’ì„ ìƒí™© ë³„ë¡œ ì•Œì•„ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- ìœ„ì˜ ìƒíƒœ ê·¸ëŒ€ë¡œ ì§„í–‰í–ˆë‹¤ë©´, `MYSQL_ROOT_PASSWORD`ì˜ ìµœì¢…ê°’ì€ `YAML`ì— ì§ì ‘ ì‚½ì…ëœ `passwd_from_yaml`ì´ ëœë‹¤.\n\n- ë§Œì•½ `YAML`ì˜ í™˜ê²½ë³€ìˆ˜ í•­ëª©ì´ `MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}`ë¡œ ëŒ€ì²´ëœë‹¤ë©´, `MYSQL_ROOT_PASSWORD`ì˜ ìµœì¢…ê°’ì€ ì‰˜ì—ì„œ ì»¤ë§¨ë“œë¼ì¸ìœ¼ë¡œ ì…ë ¥ëœ `passwd_from_shell`ì´ ëœë‹¤.\n\n- ë§Œì•½ `YAML`ì˜ í™˜ê²½ë³€ìˆ˜ í•­ëª©ì´ `MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}`ë¡œ ëŒ€ì²´ë˜ê³  ì‰˜ í™˜ê²½ì—ì„œì˜ í™˜ê²½ë³€ìˆ˜ ì…ë ¥ ê³¼ì •ì´ ìƒëµëœë‹¤ë©´, `MYSQL_ROOT_PASSWORD`ì˜ ìµœì¢…ê°’ì€ `.env` íŒŒì¼ì— ì‚½ì…ëœ `passwd_from_envfile`ì´ ëœë‹¤.\n\n- ë§Œì•½ `YAML`ì—ì„œ í™˜ê²½ë³€ìˆ˜ í•­ëª©ì´ ì™„ì „íˆ ì‚­ì œë˜ê³ , ì‰˜ í™˜ê²½ì—ì„œì˜ í™˜ê²½ë³€ìˆ˜ ì…ë ¥ ê³¼ì •ì´ ìƒëµë˜ë©°, `.env` íŒŒì¼ë„ ë”°ë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•Šì•˜ë‹¤ë©´, `MYSQL_ROOT_PASSWORD`ì˜ ìµœì¢…ê°’ì€ Dockerfileì„ í†µí•´ ì‚½ì…ëœ `passwd_from_dockerfile`ì´ ëœë‹¤.</code></pre></div>\n</details>\n<br>\n<hr>\n<br>\n<h2 id=\"ë§ˆì¹˜ë©°\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"ë§ˆì¹˜ë©° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆì¹˜ë©°..</h2>\n<p>ì´ë²ˆ ì‹œê°„ì—ëŠ” ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ì‹¤í–‰í™˜ê²½ ì„¤ì •ì„ ìë™í™”í•´ë³´ì•˜ë‹¤.</p>\n<p>ë‹¤ìŒ ì‹œê°„ì—ëŠ” ì›ê²© ì €ì¥ì†Œ release ë¸Œëœì¹˜ì— pushê°€ ë°œìƒí•˜ë©´,</p>\n<p>docker ì´ë¯¸ì§€ë¡œ CI/CDí•  ìˆ˜ ìˆë„ë¡ í•´ë³´ì</p>\n<hr>\n<br>\n<p><em>ì°¸ê³ ìë£Œ</em></p>\n<p><em><a href=\"https://docs.docker.com/compose/reference/\">Overview of docker compose CLI | Docker Documentation</a></em></p>\n<p><em><a href=\"https://1mini2.tistory.com/31\">[Docker-Basic (10)] Docker File ì‚¬ìš©í•˜ê¸° - ì‹¤ìŠµ2 MARIA DB (tistory.com)</a></em></p>\n<p><em><a href=\"https://www.daleseo.com/dockerfile/\">Dockerfileì—ì„œ ìì£¼ ì“°ì´ëŠ” ëª…ë ¹ì–´ | Engineering Blog by Dale Seo</a></em></p>\n<p><em><a href=\"https://velog.io/@seheon99/%EC%B5%9C%EA%B3%A0%EC%9D%98-Dockerfile-%EC%9E%91%EC%84%B1%EC%9D%84-%EC%9C%84%ED%95%9C-%EB%AA%87-%EA%B0%80%EC%A7%80-%EC%8A%B5%EA%B4%80%EB%93%A4\">ìµœê³ ì˜ Dockerfile ì‘ì„±ì„ ìœ„í•œ ëª‡ ê°€ì§€ ìŠµê´€ë“¤ (velog.io)</a></em></p>\n<p><em><a href=\"https://narup.tistory.com/204\">[Dockerfile] Dockerfileì´ë€? Dockerfile ì˜µì…˜ â€” ì‹œê°„ì´ ë©ˆì¶”ëŠ” ì¥ì†Œ (tistory.com)</a></em></p>\n<p><em><a href=\"https://mino-park7.github.io/docker/2018/12/10/dockerfile/\">Dockerfile ì‘ì„±ë°©ë²• ë° ì½ëŠ” ë²• Â· MinhoPark (mino-park7.github.io)</a></em></p>\n<p><em><a href=\"https://seongjin.me/environment-variables-in-docker-compose/\">Docker Composeì—ì„œ ê° ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆì— ì“°ì´ëŠ” í™˜ê²½ë³€ìˆ˜ë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²• (seongjin.me)</a></em></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%9D%B4%EC%A0%84%ED%8E%B8-%EC%9A%94%EC%95%BD\">ì´ì „í¸ ìš”ì•½</a></li>\n<li><a href=\"#%EB%AA%A9%ED%91%9C\">ëª©í‘œ</a></li>\n<li><a href=\"#%EC%97%AC%EC%A0%95\">ì—¬ì •</a></li>\n<li><a href=\"#q--a\">Q &#x26; A</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">ë§ˆì¹˜ë©°..</a></li>\n</ul>\n</div>","excerpt":"ì§€ì ê³¼ ëŒ“ê¸€ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤! ë„ì»¤ ì‚½ì§ˆ ê°œì„ í•˜ê¸° ì´ì „í¸ ìš”ì•½ ì´ì „ í¸  ì—ì„œëŠ” ë‹¨ìˆœ ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•´ì„œ ì§ì ‘ ëª…ë ¹ì–´ë¥¼ íƒ€ì´í•‘í•˜ë©´ì„œ, ì»¨í…Œì´ë„ˆì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ì˜€ë‹¤. ê·¸ ê²°ê³¼, ì»¨í…Œì´ë„ˆê°€ ì¬ë¶€íŒ…ë˜ë©´ ëŒ€ë¶€ë¶„ì˜ ë°ì´í„°ì™€ ìƒíƒœê°€ ì†Œì‹¤ë˜ì–´ ê°™ì€ ê³¼ì •ì„ ë°˜ë³µí•´ì•¼ í–ˆë‹¤. ëª©í‘œ ë„ì»¤ ì»¨í…Œì´ë„ˆ ì„¤ì •ì„ ê°„ì†Œí™”, ìë™í™”í•´ë³´ì  ê³µí†µ ì„¤ì • ë¶„ë¦¬ â†’ env íŒŒì¼ ìƒì„± DBì— ëŒ€í•œ dockerfile ì‘ì„± â†’ ì´ë¯¸ì§€ ìƒì„± Package(ì„œë¸Œë„ë©”ì¸B, ì§€ì›ë„ë©”ì¸D)ì— ëŒ€í•œ dockerfile ì‘ì„± â†’ ì´ë¯¸ì§€ ìƒì„± docker-composeë¥¼ ì´ìš©í•´ì„œ ì‹¤í–‰ ì—¬ì • env íŒŒì¼ë¡œ ì„¤ì • ë¶„ë¦¬ Managerì— ëŒ€í•œ dockerfile ì‘ì„± ServiceKitì— ëŒ€í•œ dockerfile ì‘ì„± DBì— ëŒ€í•œ dockerfile ì‘ì„± ë° ì´ë¯¸ì§€ ë¹Œë“œ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ DB ì´ìš©í•˜ëŠ” ê²½ìš°(Docker_db íŒŒì¼) ì™¸ë¶€ DBë¥¼ ì—°ê²°í•˜ëŠ” ê²½ìš° â†’ Dockerfile ì‘ì„± X â†’ ì„¤ì •íŒŒì¼ì—ì„œ   ì£¼ì„ì„ í’€ê³  ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„â€¦","frontmatter":{"date":"December 25, 2022","title":"MSA ë„ì»¤ë¼ì´ì§•(Dockerizing) ì‚½ì§ˆ ê°œì„ í•˜ê¸°","categories":"knowledge","author":"ì£¼ë…","emoji":"ğŸ”®"},"fields":{"slug":"/msa-dockerizing-improve/"}},"next":{"id":"d2193d58-d5ff-5f1b-80b5-ce33ce0ade1e","html":"<p>ì§€ì ê³¼ ëŒ“ê¸€ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤!</p>\n<br>\n<hr>\n<h2 id=\"ë“¤ì–´ê°€ê¸°ì—-ì•ì„œ\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%97%90-%EC%95%9E%EC%84%9C\" aria-label=\"ë“¤ì–´ê°€ê¸°ì— ì•ì„œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë“¤ì–´ê°€ê¸°ì— ì•ì„œ..</h2>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ë³¸ ê²Œì‹œê¸€ì€ MSA í˜•íƒœë¡œ êµ¬ì„±ëœ ì„œë¹„ìŠ¤ë¥¼ \ní•˜ë‚˜ì”© ë„ì»¤ë¼ì´ì§•(dockerizing)í•˜ëŠ” ê²Œì‹œë¬¼ì…ë‹ˆë‹¤.\n\në„ì»¤ ëª…ë ¹ì–´ë¥¼ ë°°ìš°ëŠ” ì´ˆì‹¬ì ì…ì¥ì—ì„œ ì‘ì„±í•œ ê¸€ë¡œ\nì‚½ì§ˆí–ˆë˜ ì‹œê°„ ìˆœì„œëŒ€ë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\n\nì¤‘ê¸‰ì ì´ìƒ ë¶„ë“¤ì€ í•„ìš”í•œ ëª…ë ¹ì–´ë§Œ ê³¨ë¼ì„œ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</code></pre></div>\n<br>\n<hr>\n<br>\n<h2 id=\"í˜„ì¬-ìƒí™©\" style=\"position:relative;\"><a href=\"#%ED%98%84%EC%9E%AC-%EC%83%81%ED%99%A9\" aria-label=\"í˜„ì¬ ìƒí™© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í˜„ì¬ ìƒí™©</h2>\n<p>í˜„ì¬ ê°€ì§€ê³  ìˆëŠ” MSA í˜•íƒœì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACf0lEQVQoz22Sy09TQRSH+6/4v7gyJorGnRFNDEskutBERBGjxI1gdQGEiFHBBykg7/JGKPRFS6EiLfRBW/ru7W2hpb2PT9tb0IW/ZOaczJz5zpyZo0tFDzH2dOCcGaUiVVFQVVXzVfXMD4fC7Pg2OC7mqAVWpqr9N17nGhtAf/sKC+MaUFEUZFUbkiJXbUWvX7bzpKOBeNKDtGclYZsgYZ8m6zSiZA9RToHNX0ycuz/Izb41VEXifwpG4+i7ehiamgO5RMmzSnh9HO/SMPmtORDCtUgV3fxOlFH7Psl0proUKwpMxTcwJpxMxOzYsnsUikUcDgexeLR6SHLPkFgxsG38juocRoxH2IwUSOVL6KqQRA4VrbSvhz84v9JCnaWdC2tt3LB1IspHBCNHuPxH7HsC5L49ROy/hzDwgGJ/I0HLLC9mE1h8WQ3o8GZx+bL4gid0bs9St/yUa9NtXJ56TIPjDYKco5JPKKikwwfkB5sJ9Dax29VI8n0Ti+NGno36sPsFDSjJCmKhhFSE7r05LprauLrQxqXFVurNb9lLpzg+lsmXQIxFSAw8IvqukYPeOxx/asK1MMnzyRA2n4Du9MurLQDMJBxc33jFLXM39Q49d9f72fCm+OnPsu0X2dyJETDoyRlaiQ62I4+0cOAyo19O4gyK2g0rUKUGDhVSjEXMfHCu8dW7iklwnyXTJEHQSsQ2z65pkZNfS5RzKcQTlbKkaMBq/9WArlyAPo+RLouBLusQw+F18uVilVn5NqWQp7A1i3/+M7vTH8lYRlBTgb9tcwo8LT1azGARvFjTXixpD1tikLIinz2KKpWQYx7KYTcnITdyxI1ylNH2/jT2b6+3Db80o/CtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"msa\"\n        title=\"msa\"\n        src=\"/static/c4fef21cd9c5f1b37ad7342abc8dbf37/37523/msa.png\"\n        srcset=\"/static/c4fef21cd9c5f1b37ad7342abc8dbf37/e9ff0/msa.png 180w,\n/static/c4fef21cd9c5f1b37ad7342abc8dbf37/f21e7/msa.png 360w,\n/static/c4fef21cd9c5f1b37ad7342abc8dbf37/37523/msa.png 720w,\n/static/c4fef21cd9c5f1b37ad7342abc8dbf37/302a4/msa.png 1080w,\n/static/c4fef21cd9c5f1b37ad7342abc8dbf37/5d942/msa.png 1343w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ì„œë¹„ìŠ¤ ë³„ë¡œ ì‹¤í–‰íŒŒì¼ì´ ë¶„ë¦¬ê°€ ë˜ì–´</p>\n<p>API ìš”ì²­ìœ¼ë¡œ í†µì‹ í•˜ê³  ìˆê¸´ í•˜ì§€ë§Œ,</p>\n<p>ì‹¤í–‰ ì‹œ, ê°™ì€ ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ ìƒëŒ€ìœ„ì¹˜ ì°¸ì¡°ë¥¼ í•˜ê³  ìˆë‹¤.</p>\n<p>ì¦‰, <u>ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ê°€ ì–´ë ¤ìš´ ìƒíƒœ</u>ì´ë‹¤.</p>\n<br>\n<p>ë”°ë¼ì„œ, ë‹¨ê³„ì , ì ì§„ì ìœ¼ë¡œ ë„ì»¤ë¼ì´ì§•í•˜ê³ ì í•œë‹¤.</p>\n<br>\n<h2 id=\"ëª©í‘œ\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"ëª©í‘œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ëª©í‘œ</h2>\n<p>ì´ë²ˆ ê¸€ì—ì„œëŠ” <code class=\"language-text\">ìµœì†Œí•œì˜ ë¶„ë¦¬</code>ë¥¼ í•˜ë ¤ê³  í•œë‹¤.</p>\n<ul>\n<li>\n<p>ì–´í”Œë¦¬ì¼€ì´ì…˜(MSAë¥¼ í†µì§¸ë¡œ) ê³¼ DBë¥¼ ê°ê° ì»¨í…Œì´ë„ˆí™”</p>\n</li>\n<li>\n<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ DBê°€ ê°ê° ë‹¤ë¥¸ ë³¼ë¥¨(Volume)ì„ ê°€ì§</p>\n</li>\n<li>\n<p>ê°™ì€ ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ë¡œ ì—°ê²°</p>\n</li>\n</ul>\n<br>\n</aside>\n<h2 id=\"ì—¬ì •\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EC%A0%95\" aria-label=\"ì—¬ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì—¬ì •</h2>\n<ol>\n<li>\n<p>ì´ë¯¸ì§€ ê²€ìƒ‰</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ë„ì»¤ ì´ë¯¸ì§€ ê²€ìƒ‰ - ë‹¤ìš´ë¡œë“œ - í™•ì¸</span>\n<span class=\"token function\">docker</span> search ubuntu\n\n<span class=\"token function\">docker</span> pull ubuntu:18.04\n\n<span class=\"token function\">docker</span> images</code></pre></div>\n</li>\n</ol>\n<br>\n<ol start=\"2\">\n<li>\n<p>ì»¨í…Œì´ë„ˆ ìƒì„± ë° ì‹¤í–‰</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì»¨í…Œì´ë„ˆë¼ë¦¬ ë¬¶ì„ ë„¤íŠ¸ì›Œí¬ ìƒì„±</span>\n<span class=\"token function\">docker</span> network create <span class=\"token variable\">${ë„¤íŠ¸ì›Œí¬ ì´ë¦„}</span>\n\n<span class=\"token comment\"># ì»¨í…Œì´ë„ˆ ìƒì„± ë° ì‹¤í–‰</span>\n<span class=\"token comment\"># ë¡œì»¬ í¬íŠ¸ë‘ ê²¹ì¹˜ë©´ í•˜ë‚˜ë§Œ ì‹¤í–‰í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ì˜</span>\n<span class=\"token function\">docker</span> run -i -t --network <span class=\"token variable\">${ë„¤íŠ¸ì›Œí¬ ì´ë¦„}</span> -p <span class=\"token number\">8080</span>:8080 -v D:<span class=\"token punctuation\">\\</span>repo:/data --name <span class=\"token variable\">${ì»¨í…Œì´ë„ˆ ì´ë¦„}</span> ubuntu:18.04 /bin/bash\n    <span class=\"token comment\"># -i : ì‚¬ìš©ì ì…ì¶œë ¥ ê°€ëŠ¥ ì˜µì…˜</span>\n    <span class=\"token comment\"># -t : Bash ì‚¬ìš©</span>\n    <span class=\"token comment\"># --network : í•´ë‹¹ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°</span>\n    <span class=\"token comment\"># -p : í¬íŠ¸ í¬ì›Œë”© = ${í˜¸ìŠ¤íŠ¸OS ì ‘ì†í¬íŠ¸}:${ì»¨í…Œì´ë„ˆ ì—°ê²°í¬íŠ¸}</span>\n    <span class=\"token comment\"># -v : íŒŒì¼ì‹œìŠ¤í…œ ë³¼ë¥¨ ì—°ê²° = ${ì—°ê²°í•  í˜¸ìŠ¤íŠ¸OS ë””ë ‰í† ë¦¬}:${ì—°ê²°ë  ì»¨í…Œì´ë„ˆ ë””ë ‰í† ë¦¬}</span>\n    <span class=\"token comment\"># -d : Bast ë¯¸ì‚¬ìš©ì»¨í…Œì´ë„ˆë¥¼ ë°ëª¬ í”„ë¡œì„¸ìŠ¤ í˜•íƒœë¡œ ì‹¤í–‰í•˜ì—¬ ìœ ì§€</span>\n    <span class=\"token comment\"># --name : ì»¨í…Œì´ë„ˆ ì´ë¦„ ì§€ì •</span>\n    <span class=\"token comment\"># /bin/bash : ì»¨í…Œì´ë„ˆê°€ ì§€ì†ì ìœ¼ë¡œ ì‹¤í–‰í•  íŒŒì¼ì„ ì§€ì •í•œ ê²ƒ(ë³€ê²½ ê°€ëŠ¥)</span>\n\n<span class=\"token comment\"># ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ í™•ì¸</span>\n<span class=\"token function\">docker</span> <span class=\"token function\">ps</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì»¨í…Œì´ë„ˆ ì „ì²´ ëª©ë¡ í™•ì¸</span>\n<span class=\"token comment\"># (ì´ì „ì— ì¢…ë£Œë˜ì—ˆë˜ ì»¨í…Œì´ë„ˆ í¬í•¨)</span>\n<span class=\"token function\">docker</span> <span class=\"token function\">ps</span> -a\n\n<span class=\"token comment\"># ê¸°ì¡´ì— ìƒì„±ë˜ì–´ ìˆëŠ” ì»¨í…Œì´ë„ˆ ì‹œì‘</span>\n<span class=\"token function\">docker</span> start -i <span class=\"token string\">\"ì»¨í…Œì´ë„ˆ_ì´ë¦„\"</span></code></pre></div>\n</li>\n</ol>\n<br>\n<ol start=\"3\">\n<li>\n<p>ì»¨í…Œì´ë„ˆ ì ‘ì† ë° ì¢…ë£Œ</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># í˜¸ìŠ¤íŠ¸ OSì—ì„œ</span>\n<span class=\"token comment\"># ì»¨í…Œì´ë„ˆ ì ‘ì†</span>\n<span class=\"token function\">docker</span> attach <span class=\"token string\">\"ì»¨í…Œì´ë„ˆ_ì´ë¦„\"</span>\n\n<span class=\"token comment\"># ì»¨í…Œì´ë„ˆ ì¢…ë£Œ</span>\n<span class=\"token function\">docker</span> stop <span class=\"token string\">\"ì»¨í…Œì´ë„ˆ_ì´ë¦„\"</span>\n\n<span class=\"token comment\"># ì»¨í…Œì´ë„ˆì— ì‹¤í–‰ëª…ë ¹</span>\n<span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it <span class=\"token variable\">${ì»¨í…Œì´ë„ˆ ì´ë¦„}</span> ìŠ¤í¬ë¦½íŠ¸\n<span class=\"token comment\"># -it : ì»¨í…Œì´ë„ˆ ì§€ì†ì—°ê²° ìœ ì§€</span>\n\n<span class=\"token comment\"># ì»¨í…Œì´ë„ˆì—ì„œ</span>\n<span class=\"token comment\"># í˜¸ìŠ¤íŠ¸ OSë¡œ ë³µê·€(ì»¨í…Œì´ë„ˆ ìœ ì§€)</span>\nCtrl + p, q\n\n<span class=\"token comment\"># ì»¨í…Œì´ë„ˆ ì¢…ë£Œ</span>\n<span class=\"token builtin class-name\">exit</span> / Ctrl + d</code></pre></div>\n</li>\n</ol>\n<br>\n<ol start=\"4\">\n<li>\n<p>ì»¨í…Œì´ë„ˆ ë³¼ë¥¨</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ë³¼ë¥¨ ìƒì„±</span>\n<span class=\"token function\">docker</span> volume create <span class=\"token variable\">${ë³¼ë¥¨ ì´ë¦„}</span>\n\n<span class=\"token comment\"># ì»¨í…Œì´ë„ˆì—ì„œ ë³¼ë¥¨ ë§ˆìš´íŠ¸ í•´ì œ(ì¢…ë£Œ ë¨¼ì € í•„ìš”)</span>\n<span class=\"token function\">docker</span> container <span class=\"token function\">rm</span> <span class=\"token variable\">${ë³¼ë¥¨ ì´ë¦„}</span>\n\n<span class=\"token comment\"># ë³¼ë¥¨ ì‚­ì œ</span>\n<span class=\"token function\">docker</span> volume <span class=\"token function\">rm</span> <span class=\"token variable\">${ë³¼ë¥¨ ì´ë¦„}</span></code></pre></div>\n</li>\n</ol>\n<br>\n<ol start=\"5\">\n<li>\n<p>DB ì»¨í…Œì´ë„ˆ ìƒì„±</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Postgres ì´ë¯¸ì§€ ë°›ì•„ì˜¤ê¸°</span>\n<span class=\"token function\">docker</span> image pull postgres:14\n\n<span class=\"token comment\"># DB ì»¨í…Œì´ë„ˆ ìƒì„±</span>\n<span class=\"token comment\"># ë¡œì»¬ DBë‘ í¬íŠ¸ ê²¹ì¹˜ì§€ ì•Šê²Œ ì£¼ì˜!</span>\n<span class=\"token function\">docker</span> run --network sf1 -p <span class=\"token number\">4321</span>:5432 --name pg14 -e <span class=\"token assign-left variable\">POSTGRES_PASSWORD</span><span class=\"token operator\">=</span>0000 -e <span class=\"token assign-left variable\">TZ</span><span class=\"token operator\">=</span>Asia/Seoul -v /database/pgdata:/var/lib/postgresql/data -v D:<span class=\"token punctuation\">\\</span>repo<span class=\"token punctuation\">\\</span>Package<span class=\"token punctuation\">\\</span>sf1-v7-package:/data/volume -d postgres:14 \n<span class=\"token comment\"># docker run -p 5432:5432 --name pg14</span>\n<span class=\"token comment\"># -e POSTGRES_PASSWORD=0000</span>\n<span class=\"token comment\"># -e TZ=Asia/Seoul</span>\n<span class=\"token comment\"># -v /database/pgdata:/var/lib/postgresql/data -d</span>\n<span class=\"token comment\"># -v D:\\repo\\Package\\sf1-v7-package:/data/volume</span>\n<span class=\"token comment\"># postgres:14</span>\n\n<span class=\"token comment\"># DB ì»¨í…Œì´ë„ˆ ì ‘ì†</span>\n<span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it pg14 /bin/bash</code></pre></div>\n</li>\n</ol>\n<br>\n<ol start=\"6\">\n<li>\n<p>DB ì„¤ì •</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì™¸ë¶€ ì ‘ì† í—ˆìš©</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /var/lib/postgresql/data/postgresql.conf\n\tlisten_addresses <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\n\n<span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /var/lib/postgresql/data/pg_hba.conf\n<span class=\"token comment\"># ì•„ë˜ì˜ ë‚´ìš©ì¤‘ ì›í•˜ëŠ” ë‚´ìš©ì„ ê¸°ì¡´ ë‚´ìš©ì— `ì¶”ê°€`ë¡œ ì‚½ì…í•œë‹¤!</span>\n\t<span class=\"token comment\"># /24 => Subnet Mask 255.255.255.0 (ë§¨ ëìë¦¬ë§Œ ë²”ìœ„ í—ˆìš©)</span>\n\t<span class=\"token comment\"># /32 => Subnet Mask 255.255.255.255 (ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” IPë§Œ í—ˆìš©)</span>\n\t<span class=\"token comment\"># ëª¨ë“  IP í—ˆìš©</span>\n\t<span class=\"token function\">host</span>  all all <span class=\"token number\">0.0</span>.0.0/0  trust\n\t\n\t<span class=\"token comment\"># íŠ¹ì • IP ëŒ€ì—­ í—ˆìš© (ex : 192.168.0.1 ~ 192.168.0.255)</span>\n\t<span class=\"token function\">host</span>  all  all <span class=\"token variable\">${ì™¸ë¶€IP}</span>/24  trust\n\t\n\t<span class=\"token comment\"># íŠ¹ì • IP ë§Œ í—ˆìš©</span>\n\t<span class=\"token function\">host</span>  all  all <span class=\"token variable\">${ì™¸ë¶€IP}</span>/32  trust\n\n<span class=\"token comment\"># ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘</span>\n<span class=\"token builtin class-name\">exit</span>\n<span class=\"token function\">docker</span> start -i pg14\n\n<span class=\"token comment\"># Postgres ë¡œê·¸ì¸</span>\npsql -U postgres\n\n<span class=\"token comment\"># DB ë° ìŠ¤í‚¤ë§ˆ ìƒì„±</span>\npsql -U postgres\nCREATE DATABASE <span class=\"token string\">\"sf1-manager\"</span> OWNER postgres<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">\\</span>c <span class=\"token string\">\"sf1-manager\"</span>\nCREATE SCHEMA <span class=\"token string\">\"sf1v7_manager\"</span>\n\n<span class=\"token comment\"># íŒ¨í‚¤ì§€ ìŠ¤í¬ë¦½íŠ¸ë¡œ í…Œì´ë¸” ìƒì„±</span>\n<span class=\"token builtin class-name\">cd</span> /data/volume/batch\n./manager.sh postgresql_table createdb</code></pre></div>\n</li>\n<li>\n<p>í˜¸ìŠ¤íŠ¸OSì— ì—°ê²°í•œ ë³¼ë¥¨ì—ì„œ í•„ìš”í•œ ì„¤ì •íŒŒì¼ ë³µì‚¬</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># íŒŒì¼ ë³µì‚¬ (ë°˜ëŒ€ë„ ê°€ëŠ¥í•¨)</span>\n<span class=\"token function\">docker</span> <span class=\"token function\">cp</span> <span class=\"token string\">\"í˜¸ìŠ¤íŠ¸ OS íŒŒì¼ê²½ë¡œ\"</span> <span class=\"token string\">\"ì»¨í…Œì´ë„ˆ ë³µì‚¬ìœ„ì¹˜\"</span></code></pre></div>\n</li>\n<li>\n<p>ì„œë¹„ìŠ¤ ì‹¤í–‰</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ìì‹ ì˜ ì„œë¹„ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ì½”ë“œ</span></code></pre></div>\n</li>\n</ol>\n<br>\n<h2 id=\"q--a\" style=\"position:relative;\"><a href=\"#q--a\" aria-label=\"q  a permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q &#x26; A</h2>\n<ul>\n<li>\n<p>sudo, vi ëª…ë ¹ì´ ë™ì‘í•˜ì§€ ì•Šì•„ìš”</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">apt-get</span> update\n\n<span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token function\">vim</span></code></pre></div>\n</li>\n<li>\n<p>ì»¨í…Œì´ë„ˆ, ë³¼ë¥¨ ì´ë¦„ì„ ë³€ê²½í•˜ê³  ì‹¶ì–´ìš”</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì»¨í…Œì´ë„ˆ ì´ë¦„ ë³€ê²½</span>\n<span class=\"token function\">docker</span> <span class=\"token function\">rename</span> <span class=\"token string\">\"old\"</span> <span class=\"token string\">\"new\"</span>\n\n<span class=\"token comment\"># ë³¼ë¥¨ ì´ë¦„ ë³€ê²½</span>\n<span class=\"token function\">docker</span> volume create --name <span class=\"token variable\">${new_volume}</span>\n<span class=\"token function\">docker</span> run --rm -it -v <span class=\"token variable\">${old_volume}</span>:/from -v <span class=\"token variable\">${new_volume}</span>:/to <span class=\"token variable\">${ì»¨í…Œì´ë„ˆì´ë¦„}</span> <span class=\"token function\">sh</span> -c <span class=\"token string\">\"cd /from ; cp -av . /to\"</span>\n<span class=\"token function\">docker</span> volume <span class=\"token function\">rm</span> <span class=\"token variable\">${old_volume}</span></code></pre></div>\n</li>\n</ul>\n<br>\n<hr>\n<br>\n<h2 id=\"ë”-ë‚˜ì€-ì—¬ì •-ì¤€ë¹„\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EB%82%98%EC%9D%80-%EC%97%AC%EC%A0%95-%EC%A4%80%EB%B9%84\" aria-label=\"ë” ë‚˜ì€ ì—¬ì • ì¤€ë¹„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë” ë‚˜ì€ ì—¬ì • ì¤€ë¹„</h2>\n<br>\n<p>ë‹¤ìŒ í¸ì—ëŠ” <code class=\"language-text\">dockerfile</code>ê³¼ <code class=\"language-text\">docker-compose</code>ë¥¼ í™œìš©í•´</p>\n<p>ì´ëŸ¬í•œ ê³¼ì •ì„ ê°„ì†Œí™”í•´ë³´ë„ë¡ í•˜ê² ë‹¤.</p>\n<br>\n<hr>\n<br>\n<p>ì°¸ê³ ìë£Œ</p>\n<p><em><a href=\"https://learn.microsoft.com/ko-kr/visualstudio/docker/tutorials/tutorial-multi-container-app-mysql\">MySQL ë° Docker Composeë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ ì•± ë§Œë“¤ê¸° | Microsoft Learn</a></em></p>\n<p><em><a href=\"https://jokeyyy.tistory.com/33\">[Docker] ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ ì•± (tistory.com)</a></em></p>\n<p><em><a href=\"https://yjkim97.tistory.com/60\">[PostgreSQL] PostgreSQL docker ì„¤ì¹˜ ë° ì™¸ë¶€ì ‘ì† (tistory.com)</a></em></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%97%90-%EC%95%9E%EC%84%9C\">ë“¤ì–´ê°€ê¸°ì— ì•ì„œ..</a></li>\n<li><a href=\"#%ED%98%84%EC%9E%AC-%EC%83%81%ED%99%A9\">í˜„ì¬ ìƒí™©</a></li>\n<li><a href=\"#%EB%AA%A9%ED%91%9C\">ëª©í‘œ</a></li>\n<li><a href=\"#%EC%97%AC%EC%A0%95\">ì—¬ì •</a></li>\n<li><a href=\"#q--a\">Q &#x26; A</a></li>\n<li><a href=\"#%EB%8D%94-%EB%82%98%EC%9D%80-%EC%97%AC%EC%A0%95-%EC%A4%80%EB%B9%84\">ë” ë‚˜ì€ ì—¬ì • ì¤€ë¹„</a></li>\n</ul>\n</div>","frontmatter":{"date":"December 15, 2022","title":"MSA ë„ì»¤ë¼ì´ì§•(Dockerizing) ì‚½ì§ˆê¸°","categories":"infra","author":"ì£¼ë…","emoji":"ğŸ”®"},"fields":{"slug":"/dockerize-msa-basic/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://www.junwork.net","comments":{"utterances":{"repo":"junwork123/blog-comments"}}}}},"pageContext":{"slug":"/msa-dockerizing-improve/","nextSlug":"/dockerize-msa-basic/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}