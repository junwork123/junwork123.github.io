{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/blog-react-env-variable/",
    "result": {"data":{"cur":{"id":"1e91548e-24a2-5ec1-b4d8-5b0673d49691","html":"<h1 id=\"react-환경변수-세팅하기\" style=\"position:relative;\"><a href=\"#react-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0\" aria-label=\"react 환경변수 세팅하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React 환경변수 세팅하기</h1>\n<p><del>카카오 공유하기 버튼을 만들다가</del></p>\n<p><del>API를 노출하면 안되겠다는 생각이 들어서</del></p>\n<p>React 환경변수를 설정하는 방법을 찾아보았다.</p>\n<br/>\n<h2 id=\"code-classlanguage-textenv-파일-생성하기code\" style=\"position:relative;\"><a href=\"#code-classlanguage-textenv-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0code\" aria-label=\"code classlanguage textenv 파일 생성하기code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">.env 파일 생성하기</code></h2>\n<br/>\n<p>프로젝트 최상위에 <code class=\"language-text\">.env</code> 파일을 생성한다.</p>\n<p>그리고 다음과 같이 <code class=\"language-text\">REACT_APP_~~~</code>으로 시작하는 변수를 선언한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">  REACT_APP_KAKAO_SHARE_KEY=키값</code></pre></div>\n<h3 id=\"u중요한-것u\" style=\"position:relative;\"><a href=\"#u%EC%A4%91%EC%9A%94%ED%95%9C-%EA%B2%83u\" aria-label=\"u중요한 것u permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><u>중요한 것!</u></h3>\n<p><code class=\"language-text\">큰 따옴표를 넣으면 안된다.</code></p>\n<p><code class=\"language-text\">변경했다면 프로젝트를 종료했다가 재시작하자</code></p>\n<p>(<del>이거 왜 안돼? 했던 필자의 경험이다.</del>)</p>\n<p><br/><br/></p>\n<h2 id=\"code-classlanguage-text사용하기code\" style=\"position:relative;\"><a href=\"#code-classlanguage-text%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0code\" aria-label=\"code classlanguage text사용하기code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">사용하기</code></h2>\n<br/>\n<p>그리고 사용할 스크립트로 이동해서 다음과 같이 사용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token comment\">// 방법1</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">app</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> kakaoKey <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REACT_APP_</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token comment\">// 방법2</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>p key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REACT_APP_</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span></code></pre></div>\n<p><br/><br/></p>\n<h2 id=\"code-classlanguage-text-환경-분리하기code\" style=\"position:relative;\"><a href=\"#code-classlanguage-text-%ED%99%98%EA%B2%BD-%EB%B6%84%EB%A6%AC%ED%95%98%EA%B8%B0code\" aria-label=\"code classlanguage text 환경 분리하기code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">+ 환경 분리하기</code></h2>\n<br/>\n<p>또한 <code class=\"language-text\">실행환경(로컬, 개발, 운영 등)</code>에 따라</p>\n<p><code class=\"language-text\">우선순위를 정하여 동작</code>할 수 있다.</p>\n<p>(물론 .env 하나만 있다면 그 파일이 사용된다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">    <span class=\"token comment\"># 순서대로 로컬, 개발, 운영, 일반순으로 우선순위가 동작한다.</span>\n    .env.local <span class=\"token punctuation\">></span> .env.development <span class=\"token punctuation\">></span> .env.production <span class=\"token punctuation\">></span> .env</code></pre></div>\n<p><br/><br/></p>\n<hr>\n<p><em>참고자료 출처</em></p>\n<p><em><a href=\"https://han-py.tistory.com/\">han-py님 블로그</a></em></p>\n<p><em><a href=\"https://goddino.tistory.com/341?category=1080917\">코딩하는 갓디노님 블로그</a></em></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#env-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\"><code class=\"language-text\">.env 파일 생성하기</code></a></p>\n<ul>\n<li><a href=\"#u%EC%A4%91%EC%9A%94%ED%95%9C-%EA%B2%83u\"><u>중요한 것!</u></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\"><code class=\"language-text\">사용하기</code></a></p>\n</li>\n<li>\n<p><a href=\"#-%ED%99%98%EA%B2%BD-%EB%B6%84%EB%A6%AC%ED%95%98%EA%B8%B0\"><code class=\"language-text\">+ 환경 분리하기</code></a></p>\n</li>\n</ul>\n</div>","excerpt":"React 환경변수 세팅하기 카카오 공유하기 버튼을 만들다가 API를 노출하면 안되겠다는 생각이 들어서 React 환경변수를 설정하는 방법을 찾아보았다.  프로젝트 최상위에  파일을 생성한다. 그리고 다음과 같이 으로 시작하는 변수를 선언한다. 중요한 것!   (이거 왜 안돼? 했던 필자의 경험이다.)   그리고 사용할 스크립트로 이동해서 다음과 같이 사용하면 된다.   또한 에 따라 할 수 있다. (물론 .env 하나만 있다면 그 파일이 사용된다.)  참고자료 출처 han-py님 블로그 코딩하는 갓디노님 블로그  중요한 것!","frontmatter":{"date":"June 20, 2022","title":"React 환경변수 세팅하기","categories":"블로그-발전기","author":"주녁","emoji":"🔮"},"fields":{"slug":"/blog-react-env-variable/"}},"next":{"id":"d632a085-ac22-561b-80c5-4ebebcdc12a1","html":"<h2 id=\"포스팅-기본-구조\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%EC%8A%A4%ED%8C%85-%EA%B8%B0%EB%B3%B8-%EA%B5%AC%EC%A1%B0\" aria-label=\"포스팅 기본 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>포스팅 기본 구조</h2>\n<p>파일이름 : index.md 로 설정해야 조회수 설정 등 플러그인이 작동함.</p>\n<ul>\n<li>\n<p>emoji : 🔮 // 필수 아님</p>\n</li>\n<li>\n<p>title : 이 블로그 스킨에 대한 이해 with React, GraphQL // 필수</p>\n</li>\n<li>\n<p>date : ‘2021-06-18 00:00:00’ // 날짜(필수), 포맷 지켜야함</p>\n</li>\n<li>\n<p>author : 주녁 // 작성자</p>\n</li>\n<li>\n<p>tags : gatsby React GraphQL // 띄어쓰기로 구분</p>\n</li>\n<li>\n<p>categories : featured // 블로그 카테고리 중 복수개 입력</p>\n</li>\n<li>\n<p>블로그의 기본 설정 : gatsby-meta-config.js\n<br/> allMarkdownRemark, siteMetadata과 같은 메타데이터 설정</p>\n</li>\n<li>\n<p>첫 index, about 페이지 설정 : /pages/*.js</p>\n</li>\n</ul>\n<p><br/><br/></p>\n<h2 id=\"중요-포스팅-안에-code-classlanguage-textcode으로-제목이-없으면-아래-오류-발생\" style=\"position:relative;\"><a href=\"#%EC%A4%91%EC%9A%94-%ED%8F%AC%EC%8A%A4%ED%8C%85-%EC%95%88%EC%97%90-code-classlanguage-textcode%EC%9C%BC%EB%A1%9C-%EC%A0%9C%EB%AA%A9%EC%9D%B4-%EC%97%86%EC%9C%BC%EB%A9%B4-%EC%95%84%EB%9E%98-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D\" aria-label=\"중요 포스팅 안에 code classlanguage textcode으로 제목이 없으면 아래 오류 발생 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(중요) 포스팅 안에 <code class=\"language-text\">##</code>으로 제목이 없으면 아래 오류 발생</h2>\n<p><code class=\"language-text\">TypeError: Cannot read properties of null (reading 'children')</code></p>\n<p><br/><br/></p>\n<h2 id=\"참고-포스트-조회-query\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%ED%8F%AC%EC%8A%A4%ED%8A%B8-%EC%A1%B0%ED%9A%8C-query\" aria-label=\"참고 포스트 조회 query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(참고) 포스트 조회 Query</h2>\n<p>포스트의 주소(slug)는 자동생성된다. -> gatsby-nodes.js에서 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//src\\pages\\index.js</span>\nquery <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">allMarkdownRemark</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">sort</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">fields</span><span class=\"token operator\">:</span> frontmatter___date<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">order</span><span class=\"token operator\">:</span> <span class=\"token constant\">DESC</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        edges <span class=\"token punctuation\">{</span>\n            node <span class=\"token punctuation\">{</span>\n                id\n                <span class=\"token function\">excerpt</span><span class=\"token punctuation\">(</span>pruneLength<span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">truncate</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n                frontmatter <span class=\"token punctuation\">{</span>\n                    categories\n                    title\n                    <span class=\"token function\">date</span><span class=\"token punctuation\">(</span>formatString<span class=\"token operator\">:</span> <span class=\"token string\">\"MMMM DD, YYYY\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span>\n                fields <span class=\"token punctuation\">{</span>\n                    slug\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%ED%8F%AC%EC%8A%A4%ED%8C%85-%EA%B8%B0%EB%B3%B8-%EA%B5%AC%EC%A1%B0\">포스팅 기본 구조</a></li>\n<li><a href=\"#%EC%A4%91%EC%9A%94-%ED%8F%AC%EC%8A%A4%ED%8C%85-%EC%95%88%EC%97%90-%EC%9C%BC%EB%A1%9C-%EC%A0%9C%EB%AA%A9%EC%9D%B4-%EC%97%86%EC%9C%BC%EB%A9%B4-%EC%95%84%EB%9E%98-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D\">(중요) 포스팅 안에 <code class=\"language-text\">##</code>으로 제목이 없으면 아래 오류 발생</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0-%ED%8F%AC%EC%8A%A4%ED%8A%B8-%EC%A1%B0%ED%9A%8C-query\">(참고) 포스트 조회 Query</a></li>\n</ul>\n</div>","frontmatter":{"date":"June 18, 2022","title":"이 블로그 스킨에 대한 이해 with React, GraphQL","categories":"블로그-발전기","author":"주녁","emoji":"🔮"},"fields":{"slug":"/blog-understanding/"}},"prev":{"id":"c883403c-0871-5d38-9b72-024e93098a85","html":"<h2 id=\"사전준비\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%A0%84%EC%A4%80%EB%B9%84\" aria-label=\"사전준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>사전준비</strong></h2>\n<p>아래 코드를 터미널에서 실행시켜서 플러그인을 설치하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install\n\nnpm install gatsby@^4.9.3\n\nnpm install gh-pages --save-dev\n\nnpm install copyfiles</code></pre></div>\n<p>각각 설치하는 내용은 아래와 같다.</p>\n<p>P.S 이 스킨은 4.9.3버전까지만 동작하는듯 하다. (버전을 잘 확인하자)</p>\n<ul>\n<li>\n<p>gatsby : 리액트(React) 기반의 정적 사이트 생성 프레임워크</p>\n</li>\n<li>\n<p>gh-pages : GitHub Repository를 이용해 웹 사이트를 무료로 호스팅해주는 서비스</p>\n</li>\n<li>\n<p>copyfiles : npm에서 파일 복사를 도와주는 패키지 (개인 도메인이 있는 경우)</p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"개인-도메인-설정\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9D%B8-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%84%A4%EC%A0%95\" aria-label=\"개인 도메인 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>개인 도메인 설정</strong></h2>\n<p>필자처럼 개인 도메인(ooo.com, xxx.net)을 구매한 사람은</p>\n<p>GitHub repository의 <code class=\"language-text\">pages</code>에서</p>\n<p>접근 주소를 개인도메인으로 설정해줄 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACfUlEQVQ4y3VT23KbMBTkuTEGJHQHCcTFgE3SJE3SmbaP7Xv7U/3s7UjYrtOZPuysrMHLnj1LwpRDKS12OUdaiMgFq+CGFX68h6p8vM+oeg+ycU4V9oVEGv6fCySldOC6uYoF7EuNwo7grof2PWTTQTgP1Q7xrJru5q4DNRYpk9iXEgnTDdrxBGX7KBrekjIBMlro0wizjmDLBDIvoMuMfHDIvEbeGeRdFVH0NYqhRu5McGgh6w4FM1eXhFfQzYBCGBBZnVGfsZ0zYeMkKRVIqdyYCCRBTNseH/blTYYGw/wRy8Mr+ukB4/EJ8/oJ1s+o3AAqLDLeIiX6GtMFiXZDHPkidpex6HBcHtEMx5hviEWYNnLGG+wKiV1WbosIMd0gsf0R7XCMmw5CF0zrc3QYhPKwJGa2WMoaKVHYZezsir1rSKLsEF2Eh4NQqELgbnqA7ZY4XqgWP7sUOpxdvGPKohANMuaubpPwoOtmyMqDijqOnFEJ3x/QjxO4NKDSwTQHHPwEqdroMCsNMqqREoNdoXGXcdyFHgrjoeruxrpEQQWs4XC1hK0klFaQUkBIDs4ZhOAQgt2AQ0oOxjkSUXkYN8RR0yJkIkAow9JzfHlb8fVtxbfPG768LpjaErMPYJh8iSkyw9IxeMu2kZt+ifnELYceMo3GDzC2AQklLzlIKTYwCVLKeKZs46LkETnlSEJmoYOBL5vaUwVZe9huju7D4rQ7RJZuBrcTSlHHb/7vByGwC0v5t0dRkEj8/PUby9N3dOsbhtMLDqfnWPBhecRhfUE9PEI0R8j2BNmuUO0JTLf/E1SYTz8gmnsQ5UGEjfW5IPwmsgVVHlS1VxS8wh9u74XwYtLlVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이미지\"\n        title=\"이미지\"\n        src=\"/static/6ebfe66c49a106663febbbc34e62d404/37523/capture.png\"\n        srcset=\"/static/6ebfe66c49a106663febbbc34e62d404/e9ff0/capture.png 180w,\n/static/6ebfe66c49a106663febbbc34e62d404/f21e7/capture.png 360w,\n/static/6ebfe66c49a106663febbbc34e62d404/37523/capture.png 720w,\n/static/6ebfe66c49a106663febbbc34e62d404/d7ab4/capture.png 1014w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Source항목은 호스팅될 브랜치를 설정하는 곳으로</p>\n<p>필자는 <code class=\"language-text\">master</code> 브랜치에서는 기능 추가와 포스트 작성,</p>\n<p><code class=\"language-text\">gh-pages</code>에는 build 결과물을 배포(deploy)하도록 했다.</p>\n<p><br/><br/></p>\n<p>하지만 <code class=\"language-text\">한가지 문제점</code>이 있는데,</p>\n<p>매번 배포할 때마다 Custom Domain 항목이 초기화된다는 점이다.</p>\n<p>이 문제는 도메인이 적힌 CNAME 파일이</p>\n<p>빌드 결과물에 포함되지 않아서 발생하는 문제이다.</p>\n<p>필자는 <code class=\"language-text\">아래 과정을 통해 문제를 해결</code>하였다.</p>\n<p><br/><br/></p>\n<hr>\n<h2 id=\"packagejson에-대한-이해\" style=\"position:relative;\"><a href=\"#packagejson%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4\" aria-label=\"packagejson에 대한 이해 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>package.json에 대한 이해</strong></h2>\n<p>다음은 package.json에서 빌드 시 설정할 부분이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"repository\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"git\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/junwork123/junwork123.github.io.git\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"serve\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby serve\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby clean &amp;&amp; gatsby build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"copy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"copyfiles CNAME public/ &amp;&amp; echo 'CNAME file copied.'\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run build &amp;&amp; gatsby serve\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run build &amp;&amp; npm run copy &amp;&amp; gh-pages -d public -b gh-pages\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"echo \\\"Write tests! -> https://gatsby.dev/unit-testing\\\" &amp;&amp; exit 1\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h2 id=\"--repository\" style=\"position:relative;\"><a href=\"#--repository\" aria-label=\"  repository permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>- repository</h2>\n<p>배포될 원격 저장소의 주소를 나타낸다.</p>\n<p>github repository 메인페이지에서 쉽게 복사할 수 있다.</p>\n<p>SSH를 사용할 경우 암호키-공개키를 활용하여 Push해야한다.(번거로움)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACy0lEQVQ4y41UyXbTQBDUPYl3WautxZJsSbZked+X4ORhEh5wAK5cOXHlw7hy4sMKumU5zmJeDvVaM6OpV93VPcJVUUKGy0IV+bICUTFQkesQFRNV1URR1FCWDmvN4vOSqKPSMaFsm5CXLuSNh6KpQyCSDBd5EQVRQzJeY3P7Hrv9J7y5vYes23DDPvYfv2L/4QvGiy1qtRa8nxN8/vMd337/wOTXPdR3PoRcSU7VFSVc5KusRtJsSLp9jKS2qlqQ9MbDnmSg2m1AvwmgbVrQdwFKVg1C3Qlht2I4fgIv7EGqORBV6xGqms14uidKFiolA4riQtdayBUUCETmR0P48QjzzVuohoeKbDwjOJKcRlKqmai7IaxmB7myDCH7gYhKUp3TUuouX1AMD3LNYWTKM7WnILPoLF9RIdDP3eEC690dHL8LuxmhP90w8WC2xXixQzJawg17KJNyvfFA9kR9vqxC0OsuItdHx2nCsz1UFPNFZBeJ9HSPDKqyUY2UkBZukKA3WcML+6wmGa8QxCPEwwWje4hhMkFvvEKnP+N/6o0gvTNeQTObyJWVNGU6IHNMt82x0YrT6HfZ/cahFJbX4U6gM8MJue4124fhtLnuNBQCbTpBAtPrMGF6OWZYzSglakZMbLqd45rSzVIvH7rimDK5W6zWGAVR55ivaCiKOq+zvdMWkk7NyWpILpN06kGqD8XuaIlOb8q1avemx28/Gr3YMqe9yQqpLu1kymZE/RlfjgZzbpl4kBoymG4QD+as4qVefERIi6uScsRlkWZb5kjIlVVOl8pyTuGzlKfrW1Y2Wd1gOL/GeLnj5l5s92gnEy58pu4cjgpVo4kgHvOU0DRQpNmm3qSaUkkq/A7ar1NIH5TOqdMEagXaew3ZI0JSQAYMZ1usdnec5vJ6zyZkZP9L9VnK1OE0NrrV4okh1BoBvzDnXpezCv8R/gVjPS59IGqo3wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"repo.png\"\n        title=\"repo.png\"\n        src=\"/static/d98bf321a7640123c8beb3c5fa36ae33/13ae7/repo.png\"\n        srcset=\"/static/d98bf321a7640123c8beb3c5fa36ae33/e9ff0/repo.png 180w,\n/static/d98bf321a7640123c8beb3c5fa36ae33/13ae7/repo.png 350w\"\n        sizes=\"(max-width: 350px) 100vw, 350px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"--scripts\" style=\"position:relative;\"><a href=\"#--scripts\" aria-label=\"  scripts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>- scripts</h2>\n<p><code class=\"language-text\">npm run OOO</code>으로 동작하는 명령어들이다.</p>\n<p><code class=\"language-text\">&amp;&amp;</code>로 명령어를 여러개 연결할 수 있으며</p>\n<p>같은 명령어이기만 하면 <code class=\"language-text\">pre</code>를 붙여서 먼저 실행하도록 하게 할 수 있다.</p>\n<p><br/><br/></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"build\": \"gatsby clean &amp;&amp; gatsby build\",</code></pre></div>\n<p>예를 들어 위의 명령어는 <code class=\"language-text\">npm run build</code>로 실행할 수 있고,</p>\n<p>그 결과는 <code class=\"language-text\">빌드 결과물 제거</code> &#x26;&#x26; <code class=\"language-text\">빌드 시작</code>으로 치환되는 것이다.</p>\n<p><br/><br/></p>\n<p>그렇다면 <code class=\"language-text\">deploy</code> 명령어의 마지막에 주목해보자.</p>\n<p>해석하자면 <code class=\"language-text\">public</code> 폴더안의 결과물을 <code class=\"language-text\">gh-pages</code> 브랜치에 배포하겠다는 뜻이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gh-pages -d public -b gh-pages</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 아래는 키워드 부연설명</span>\n<span class=\"token operator\">-</span>d<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>dir <span class=\"token operator\">:</span> <span class=\"token function\">basePath</span><span class=\"token punctuation\">(</span>빌드 결과물<span class=\"token punctuation\">,</span> 배포될 파일들 위치<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">-</span>b<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>branch <span class=\"token operator\">:</span> options<span class=\"token punctuation\">.</span><span class=\"token function\">branch</span><span class=\"token punctuation\">(</span>배포될 브랜치<span class=\"token punctuation\">,</span> 여기서는 브랜치명이 <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gh-pages</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">-</span>s<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>src <span class=\"token operator\">:</span> options<span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span>배포될 파일들의 매칭패턴<span class=\"token punctuation\">,</span> 기본은 <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">**/*</span><span class=\"token template-punctuation string\">`</span></span>로 전체 파일이다<span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>더 자세한 설명은 <a href=\"https://www.npmjs.com/package/gh-pages-cli\">공식 메뉴얼</a>에서 확인할 수 있다.</p>\n</blockquote>\n<p><br/><br/></p>\n<p>따라서 <code class=\"language-text\">npm run deploy</code>를 실행하면,</p>\n<p>아래 과정을 명령어 한번에 진행할 수 있다.</p>\n<h3 id=\"code-classlanguage-text이전-빌드-결과-제거code--code-classlanguage-text빌드code--code-classlanguage-text개인도메인-주소-설정code--code-classlanguage-text배포code\" style=\"position:relative;\"><a href=\"#code-classlanguage-text%EC%9D%B4%EC%A0%84-%EB%B9%8C%EB%93%9C-%EA%B2%B0%EA%B3%BC-%EC%A0%9C%EA%B1%B0code--code-classlanguage-text%EB%B9%8C%EB%93%9Ccode--code-classlanguage-text%EA%B0%9C%EC%9D%B8%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A3%BC%EC%86%8C-%EC%84%A4%EC%A0%95code--code-classlanguage-text%EB%B0%B0%ED%8F%ACcode\" aria-label=\"code classlanguage text이전 빌드 결과 제거code  code classlanguage text빌드code  code classlanguage text개인도메인 주소 설정code  code classlanguage text배포code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">이전 빌드 결과 제거</code> > <code class=\"language-text\">빌드</code> > <code class=\"language-text\">개인도메인 주소 설정</code> > <code class=\"language-text\">배포</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"deploy\": \"npm run build &amp;&amp; npm run copy &amp;&amp; gh-pages -d public -b gh-pages\",</code></pre></div>\n<p><br/><br/></p>\n<hr>\n<h2 id=\"다음으로\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%9D%8C%EC%9C%BC%EB%A1%9C\" aria-label=\"다음으로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다음으로</h2>\n<br/>\n<p>하지만 명령어를 일일히 입력하는게 <code class=\"language-text\">자동화</code>라고 할 수 있을까?</p>\n<p>이마저도 귀찮다면?</p>\n<p>포스팅 작성 후 커밋만으로</p>\n<p>배포까지 한번에 끝낼 수 있는 방법도 있다.</p>\n<p><em><a href=\"\">다음 2편</a>에 계속..</em></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%82%AC%EC%A0%84%EC%A4%80%EB%B9%84\"><strong>사전준비</strong></a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%9D%B8-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%84%A4%EC%A0%95\"><strong>개인 도메인 설정</strong></a></p>\n</li>\n<li>\n<p><a href=\"#packagejson%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4\"><strong>package.json에 대한 이해</strong></a></p>\n</li>\n<li>\n<p><a href=\"#--repository\">- repository</a></p>\n</li>\n<li>\n<p><a href=\"#--scripts\">- scripts</a></p>\n<ul>\n<li><a href=\"#%EC%9D%B4%EC%A0%84-%EB%B9%8C%EB%93%9C-%EA%B2%B0%EA%B3%BC-%EC%A0%9C%EA%B1%B0--%EB%B9%8C%EB%93%9C--%EA%B0%9C%EC%9D%B8%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A3%BC%EC%86%8C-%EC%84%A4%EC%A0%95--%EB%B0%B0%ED%8F%AC\"><code class=\"language-text\">이전 빌드 결과 제거</code> > <code class=\"language-text\">빌드</code> > <code class=\"language-text\">개인도메인 주소 설정</code> > <code class=\"language-text\">배포</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%9D%8C%EC%9C%BC%EB%A1%9C\">다음으로</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 20, 2022","title":"블로그 빌드 및 배포 자동화 - 1","categories":"블로그-발전기","author":"주녁","emoji":"🔮"},"fields":{"slug":"/blog-build-deploy/"}},"site":{"siteMetadata":{"siteUrl":"https://www.junwork.net","comments":{"utterances":{"repo":"junwork123/blog-comments"}}}}},"pageContext":{"slug":"/blog-react-env-variable/","nextSlug":"/blog-understanding/","prevSlug":"/blog-build-deploy/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}