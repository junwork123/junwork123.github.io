{"componentChunkName":"component---src-templates-blog-template-js","path":"/understanding-blog2-2/","result":{"data":{"cur":{"id":"8cb894e4-0970-52d4-a346-cea38c6f0924","html":"<h2 id=\"자동-배포-권한을-얻기-위한-토큰-생성\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%8F%99-%EB%B0%B0%ED%8F%AC-%EA%B6%8C%ED%95%9C%EC%9D%84-%EC%96%BB%EA%B8%B0-%EC%9C%84%ED%95%9C-%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1\" aria-label=\"자동 배포 권한을 얻기 위한 토큰 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>자동 배포 권한을 얻기 위한 토큰 생성</strong></h2>\n<p>먼저 GitHub 계정의 <a href=\"https://github.com/settings/apps\">Developer settings</a> 메뉴에서 토큰(Personal access tokens)을 만들어야 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABCElEQVQY022QzW7DIBCEfW3iGGxYFmPAP0lqp8mp7/9uU7Guox56GI1A2m93plL+ChMWhHyDCzMuLYtq7XBW9Pbj/6/O2uGjsTgVaYeTIlSN6WH7ES0NMnzAOhdhfRY3Pu2A3wUXTThrQnARz3nFY7wj9yNCmFAZP2F9fSNOn1DGQ9tehniYkeYVcV6Rlg3UTzA+yxLNM2ozgCngOX5iS1eBMydUFO/Iy4bx9hAv1zSdR+cnqcBy2uWTwA5gY5NcWeLWLcO4CFeAtd5j1IrekYqsjwjDAHIM7xmqK53xO/KldbK4SNkAOoD/lb0DMzhvoPwE5Qdc/gJPL9iw7L1yhuEkXt6tiwL+AcAEl3s1dJzeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면\"\n        title=\"메뉴 진입 화면\"\n        src=\"/static/5f2ccbc848bdeb95899d3837e9c8f4bc/37523/setting.png\"\n        srcset=\"/static/5f2ccbc848bdeb95899d3837e9c8f4bc/e9ff0/setting.png 180w,\n/static/5f2ccbc848bdeb95899d3837e9c8f4bc/f21e7/setting.png 360w,\n/static/5f2ccbc848bdeb95899d3837e9c8f4bc/37523/setting.png 720w,\n/static/5f2ccbc848bdeb95899d3837e9c8f4bc/eb2af/setting.png 954w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><br/><br/></p>\n<p><code class=\"language-text\">Generate new token</code> 버튼을 누르게 되면,</p>\n<p>아래와 같은 화면이 나타나지만 어려울 것 하나없다!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 649px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACSElEQVQ4y41U226jMBTkYatumwQS7jZgG2wggVzUy3allfZ5//+LZnUOSZuqadOHEQeDxzPnYk9UDlK1kJWDUC1EZRlZ2aCqeyxjifkyxWKVXQX959FmbQfoZgPtRpSmg7YblKZF0w6I0gL3foR5EGO+TPg54/fkHdEp9jLlYLot6nYL4wbYfsdQ3QFV9wjdP8Csnxhv8TN0d4BxGxag7IYFrWIJ76UdcXAjpCa7DoXuUOgWidog1juE5Rph0SMs1lNcbhBWI1a5hb/K4If5K1jhXmhoP4J3M8PNzwV+3M4ZNwxam7/hdoa72RLz1xSkH+AlkYBICoRZxafcLyLO2YR4eh7X7hYRZsFZgS4Uy/vrBvzb/8JaaNwfLVyuYo7F8dtXVfeKrMKLGyAiAT+WSIRGIgwSaRALjTif3k9E11rIezY9fnc7PKv2ooXz1vgOvEPd48/2Cbv1HsoOqEwP7QZuIerPRO8Rqh0ifUCk94xV0R8P/5gez2UVrGpxGyTvmtUPxdG+ZvtZUXO8WH3ugvLv+bGAanr04yOkcrw4CxIsk4J7cupPiyASV+2ywmUsUJkOTbeDVJYJ6SPNMDV6TrOtHKKs+rIgb4TRpNCu9wjTktVNhAVPDCmky4Msf1OhRF42KEzLlk8nkuWU8iYN547iazcP5zDOFepuy2T086mxT5bpGiN1WWmZ+Hx2L4EJm25EPz6wUrJMLREcCSl/lMe8tNPlYTrQnosqiTAIc7ZV1j0Tvlo+TQ1bNkxCk5NKg1TWXPVLlv8DzO/IhBCu7AoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면2\"\n        title=\"메뉴 진입 화면2\"\n        src=\"/static/f3b393305cc5c4da76738e4f80a9c5c5/7762d/setting2.png\"\n        srcset=\"/static/f3b393305cc5c4da76738e4f80a9c5c5/e9ff0/setting2.png 180w,\n/static/f3b393305cc5c4da76738e4f80a9c5c5/f21e7/setting2.png 360w,\n/static/f3b393305cc5c4da76738e4f80a9c5c5/7762d/setting2.png 649w\"\n        sizes=\"(max-width: 649px) 100vw, 649px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>Note : 이 토큰의 목적(설명)</p>\n</li>\n<li>\n<p>Expiration : 토큰의 만료기간(최소 7일 / Custom - 년도지정 / No Expiration - 무제한)</p>\n</li>\n<li>\n<p>Select scopes : 이 토큰으로 할 수 있는 활동들(우리는 <code class=\"language-text\">repo</code>만 체크해도 된다.)</p>\n</li>\n</ul>\n<p><br/><br/></p>\n<hr>\n<h2 id=\"github-action에서-yml-스크립트-작성하기\" style=\"position:relative;\"><a href=\"#github-action%EC%97%90%EC%84%9C-yml-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"github action에서 yml 스크립트 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>GitHub Action에서 yml 스크립트 작성하기</strong></h2>\n<br/>\n<p>이제 배포할 <code class=\"language-text\">repogitory의 actions 메뉴</code>로 가보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.222222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAeUlEQVQI1z2MzQ6CMBjAuKuRMeGD/Y+JYQlE4/u/W0128NBLk7ZTklC2opYNHQ50ONHpg7jKLJ6bEi73ES0em164vJO3A3ErPu+YuDUfSmUQT9ePlnGJjWFyiCtEk3iHwjc+Cb7wWCKTSWgJiM1tLnZtzexWrv305weVKTSz2u3wxAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면3-0\"\n        title=\"메뉴 진입 화면3-0\"\n        src=\"/static/6b0f770fd759d70d266f24fb2ebdd820/37523/setting3-0.png\"\n        srcset=\"/static/6b0f770fd759d70d266f24fb2ebdd820/e9ff0/setting3-0.png 180w,\n/static/6b0f770fd759d70d266f24fb2ebdd820/f21e7/setting3-0.png 360w,\n/static/6b0f770fd759d70d266f24fb2ebdd820/37523/setting3-0.png 720w,\n/static/6b0f770fd759d70d266f24fb2ebdd820/59822/setting3-0.png 916w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB2ElEQVQoz41Sy27UMBTNprSdmTztxLGd99OTdDIzKqpUVhUSGxYsWLFDiC9A8P8H+QaVqmoRiyPr6r7OPT5Otz+i6mf08xmNOaI1RwzTGZ1Z0IwLvbEssfE4dkGCrR+/CJtzQwGn3Z/QDjPMfkHXTejHG9RmHdQMB/TTCbrsESU5uCzB0wJM5GCiINjYwmeShjpd3mASNQbZw+gRe9lCRSk2dmOQUJEXpdTwL1h2NFAmGVpRoBIluqRAHWfgUYrtk4H/CzrZYwouV3CZxKXLcOVz7EJByeewTN1Xco8MrUZlu0fRGNT9jLweqfH5div8m03wIrNrl+NyG60MZdGBpTmiJEPAFMxyQt4MVBjEGgFX9NqPWM53FPtcIUwy6rH65fUAM5/ICU49HKCKDj6XuLgK8OnLZ9w/PCBgGsvbd1hu78lGWdXjx89fZCFdjTCHWzTDDRJV4/2Hj/j67TsurgM4saoQxho8LckWdtDGi4lRVo2QeYdEVYhEhl1oNUz/svzDPOBrD52c1QZlNz2KykSGOJXku+l4Rx60ORvrooTPBGJZoRkPNNBqGyUaQmt4kYCT5i2yaiAt7GfYoii23lLQ5UAnrV6UYEJTjb0mbwxpaJetGiti+BsUwx1T4x2ytQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면3\"\n        title=\"메뉴 진입 화면3\"\n        src=\"/static/acb33d26b15ffc80581c80a7f622d842/37523/setting3.png\"\n        srcset=\"/static/acb33d26b15ffc80581c80a7f622d842/e9ff0/setting3.png 180w,\n/static/acb33d26b15ffc80581c80a7f622d842/f21e7/setting3.png 360w,\n/static/acb33d26b15ffc80581c80a7f622d842/37523/setting3.png 720w,\n/static/acb33d26b15ffc80581c80a7f622d842/136a2/setting3.png 884w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>스크린샷 처럼 <code class=\"language-text\">set up a workflow yourself</code> 메뉴를 누르면</p>\n<p>드디어 최종장에 돌입하게 된다. <del>필자는 이 메뉴 찾는데 10분이나 걸렸다</del></p>\n<p>결론적으로 GitHub Action을 통한 자동 배포는</p>\n<p>yml 스크립트를 <code class=\"language-text\">.github/workflows/</code> 위치에 작성해야 한다.</p>\n<blockquote>\n<p>배울게 또 늘어나? 😵</p>\n</blockquote>\n<p>싶겠지만(<del>싫겠지만</del>) 생각외로 간단하니 조금만 더 읽어보자.</p>\n<p>(바로 적용하고 싶다면 설명은 건너뛰고 <a href=\"#code\">실제 반영 코드</a> 위주로 보아도 좋다)</p>\n<p>예시를 통해 각 키워드마다 의미를 빠르게 파악하고 응용하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Blog Deployment <span class=\"token comment\"># 이 스크립트의 제목</span>\n\n    <span class=\"token comment\"># 어떤 행동을 할때마다 실행할지</span>\n    <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> \n        <span class=\"token comment\"># master, release/v*라는 이름의 브랜치에 push가 발생할 때마다</span>\n        <span class=\"token comment\"># ex) release/v0.1, release/v2.1.5</span>\n        <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> \n                <span class=\"token punctuation\">-</span> master\n                <span class=\"token punctuation\">-</span> release/v*\n        \n        <span class=\"token comment\"># gh-pages 브랜치에 pull_request가 발생할 때마다</span>\n        <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> \n                <span class=\"token punctuation\">-</span> gh<span class=\"token punctuation\">-</span>pages\n\n        <span class=\"token comment\"># cron 표현식으로 `UTC 기준 매일 월~금 오전2시에 실행`</span>\n        <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span> \n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">cron</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0 0 2 ? * MON-FRI *\"</span>\n\n        <span class=\"token comment\"># 직접 \"Run workflow\"버튼을 누를때만 실행</span>\n        <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span> \n\n    <span class=\"token comment\"># 실행할 작업을 정의</span>\n    <span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># 'build'라는 이름의 job은 (job이름은 맘대로 적어도 됨)</span>\n        <span class=\"token comment\"># 'Checkout, Install, Build'라는 이름의 작업을</span>\n        <span class=\"token comment\"># 우분투 최신버전에서 동작시킨다.</span>\n        <span class=\"token comment\"># 동작내용은 </span>\n        <span class=\"token comment\"># [브랜치 체크아웃 </span>\n        <span class=\"token comment\">#   > 패키지 설치 </span>\n        <span class=\"token comment\">#   > 빌드 </span>\n        <span class=\"token comment\">#   > 메시지 출력</span>\n        <span class=\"token comment\">#   > 도메인 복사</span>\n        <span class=\"token comment\">#   > 배포] 순으로 진행된다.</span>\n\n        <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span> \n            <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout<span class=\"token punctuation\">,</span> Install<span class=\"token punctuation\">,</span> Build\n\n            <span class=\"token comment\"># 다음 동작을 순서대로 실행</span>\n            <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n                <span class=\"token comment\"># 'uses' == 누군가 미리 정의된 workflow@version 사용</span>\n                <span class=\"token comment\"># 'master' 브랜치를 체크아웃()</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout branche\n                  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@master\n                \n                <span class=\"token comment\"># 패키지 설치 동작 </span>\n                <span class=\"token comment\"># [node 설치 </span>\n                <span class=\"token comment\">#   > 의존성 캐시검사 </span>\n                <span class=\"token comment\">#   > (변화가 있다면) npm설치] 순으로 동작</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js\n                  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@master\n                  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                      <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> 16.x\n\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Cache node modules\n                  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/cache@v2\n                  <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> cache\n                  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                      <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> node_modules\n                      <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> npm<span class=\"token punctuation\">-</span>packages<span class=\"token punctuation\">-</span>$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> hashFiles('<span class=\"token important\">**/package-lock.json')</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Dependencies\n                  <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.cache.outputs.cache<span class=\"token punctuation\">-</span>hit <span class=\"token tag\">!=</span> 'true'\n                  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n\n                <span class=\"token comment\"># 빌드 실행</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n                  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build\n                    \n                <span class=\"token comment\"># 도메인 설정파일을 빌드결과물에 복사</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> copy Cname\n                  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> cp CNAME public/ \n\n                <span class=\"token comment\"># 특정 유저의 배포 액션을 이용하여</span>\n                <span class=\"token comment\"># 빌드 결과물을 배포 경로에 복사한다.</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy changes\n                  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages@v3 \n                  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                      <span class=\"token key atrule\">github_token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GITHUB_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                      <span class=\"token key atrule\">publish_dir</span><span class=\"token punctuation\">:</span> ./public\n                      <span class=\"token key atrule\">publish_branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages <span class=\"token comment\"># default: gh-pages</span></code></pre></div>\n<h2 id=\"반영된-실제-yml-코드-span-idcodespan\" style=\"position:relative;\"><a href=\"#%EB%B0%98%EC%98%81%EB%90%9C-%EC%8B%A4%EC%A0%9C-yml-%EC%BD%94%EB%93%9C-span-idcodespan\" aria-label=\"반영된 실제 yml 코드 span idcodespan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>반영된 실제 yml 코드 <span id=\"code\"></span></h2>\n<p>취향껏 자동화 코드를 반영해보자!</p>\n<p>저는 ‘package-lock.json’을 지운 관계로 아래와 같이 적용했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Blog Deployment\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> \n    <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> \n            <span class=\"token punctuation\">-</span> master\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span> \n        <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout<span class=\"token punctuation\">,</span> Install<span class=\"token punctuation\">,</span> Build\n        <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout branche\n              <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@master\n\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js\n              <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@master\n              <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> 16.x\n\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Dependencies\n              <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n              <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build\n                \n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> copy Cname\n              <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> cp CNAME public/ \n\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy changes\n              <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages@v3\n              <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">github_token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GITHUB_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                <span class=\"token key atrule\">publish_dir</span><span class=\"token punctuation\">:</span> ./public\n                <span class=\"token key atrule\">publish_branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages</code></pre></div>\n<p>더 자세한 내용은 아래를 참조하자</p>\n<blockquote>\n<p><a href=\"https://dailyco.tech/share/gatsby-blog-auto-deploy/\">많은 도움이 된 블로그</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://fe-developers.kakaoent.com/2022/220106-github-actions/\">카카오웹툰은 GitHub Actions를 어떻게 사용하고 있을까?</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://docs.github.com/en/actions/learn-github-actions/expressions\">Actions의 표현식</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows\">Actions의 이벤트</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"cron.png\">cron 표현식</a> // 이건 여러군데서 쓰이니 알아두면 좋을거야!</p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%9E%90%EB%8F%99-%EB%B0%B0%ED%8F%AC-%EA%B6%8C%ED%95%9C%EC%9D%84-%EC%96%BB%EA%B8%B0-%EC%9C%84%ED%95%9C-%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1\"><strong>자동 배포 권한을 얻기 위한 토큰 생성</strong></a></li>\n<li><a href=\"#github-action%EC%97%90%EC%84%9C-yml-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\"><strong>GitHub Action에서 yml 스크립트 작성하기</strong></a></li>\n<li><a href=\"#%EB%B0%98%EC%98%81%EB%90%9C-%EC%8B%A4%EC%A0%9C-yml-%EC%BD%94%EB%93%9C-span-idcodespan\">반영된 실제 yml 코드 <span id=\"code\"></span></a></li>\n</ul>\n</div>","excerpt":"자동 배포 권한을 얻기 위한 토큰 생성 먼저 GitHub 계정의 Developer settings 메뉴에서 토큰(Personal access tokens)을 만들어야 한다.    버튼을 누르게 되면, 아래와 같은 화면이 나타나지만 어려울 것 하나없다!  Note : 이 토큰의 목적(설명) Expiration : 토큰의 만료기간(최소 7일 / Custom - 년도지정 / No Expiration - 무제한) Select scopes : 이 토큰으로 할 수 있는 활동들(우리는 만 체크해도 된다.)  GitHub Action에서 yml 스크립트 작성하기 이제 배포할 로 가보자.   스크린샷 처럼  메뉴를 누르면 드디어 최종장에 돌입하게 된다. 필자는 이 메뉴 찾는데 10분이나 걸렸다 결론적으로 GitHub Action을 통한 자동 배포는 yml 스크립트를  위치에 작성해야 한다. 배울게 또 늘어나? 😵 싶겠지만(싫겠지만) 생각외로 간단하니 조금만 더 읽어보자. (바로 적용하고 싶다면 설…","frontmatter":{"date":"June 20, 2022","title":"블로그 빌드 및 배포 자동화 - 2","categories":"블로그-발전기","author":"주녘씨","emoji":"🔮"},"fields":{"slug":"/understanding-blog2-2/"}},"next":{"id":"951593f7-15a1-5a60-a745-4d3c99468e33","html":"<h2 id=\"포스팅-기본-구조\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%EC%8A%A4%ED%8C%85-%EA%B8%B0%EB%B3%B8-%EA%B5%AC%EC%A1%B0\" aria-label=\"포스팅 기본 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>포스팅 기본 구조</h2>\n<ul>\n<li>\n<p>emoji : 🔮 // 필수 아님</p>\n</li>\n<li>\n<p>title : 이 블로그 스킨에 대한 이해 with React, GraphQL // 필수</p>\n</li>\n<li>\n<p>date : ‘2021-06-18 00:00:00’ // 날짜(필수), 포맷 지켜야함</p>\n</li>\n<li>\n<p>author : 주녘씨 // 작성자</p>\n</li>\n<li>\n<p>tags : gatsby React GraphQL // 띄어쓰기로 구분</p>\n</li>\n<li>\n<p>categories : featured // 블로그 카테고리 중 복수개 입력</p>\n</li>\n<li>\n<p>블로그의 기본 설정 : gatsby-meta-config.js\n<br/> allMarkdownRemark, siteMetadata과 같은 메타데이터 설정</p>\n</li>\n<li>\n<p>첫 index, about 페이지 설정 : /pages/*.js</p>\n</li>\n</ul>\n<h2 id=\"중요-포스팅-안에-code-classlanguage-textcode으로-제목이-없으면-아래-오류-발생\" style=\"position:relative;\"><a href=\"#%EC%A4%91%EC%9A%94-%ED%8F%AC%EC%8A%A4%ED%8C%85-%EC%95%88%EC%97%90-code-classlanguage-textcode%EC%9C%BC%EB%A1%9C-%EC%A0%9C%EB%AA%A9%EC%9D%B4-%EC%97%86%EC%9C%BC%EB%A9%B4-%EC%95%84%EB%9E%98-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D\" aria-label=\"중요 포스팅 안에 code classlanguage textcode으로 제목이 없으면 아래 오류 발생 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(중요) 포스팅 안에 <code class=\"language-text\">##</code>으로 제목이 없으면 아래 오류 발생</h2>\n<p><code class=\"language-text\">TypeError: Cannot read properties of null (reading 'children')</code></p>\n<h2 id=\"참고-포스트-조회-query\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%ED%8F%AC%EC%8A%A4%ED%8A%B8-%EC%A1%B0%ED%9A%8C-query\" aria-label=\"참고 포스트 조회 query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(참고) 포스트 조회 Query</h2>\n<p>포스트의 주소(slug)는 자동생성된다. -> gatsby-nodes.js에서 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//src\\pages\\index.js</span>\nquery <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">allMarkdownRemark</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">sort</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">fields</span><span class=\"token operator\">:</span> frontmatter___date<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">order</span><span class=\"token operator\">:</span> <span class=\"token constant\">DESC</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        edges <span class=\"token punctuation\">{</span>\n            node <span class=\"token punctuation\">{</span>\n                id\n                <span class=\"token function\">excerpt</span><span class=\"token punctuation\">(</span>pruneLength<span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">truncate</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n                frontmatter <span class=\"token punctuation\">{</span>\n                    categories\n                    title\n                    <span class=\"token function\">date</span><span class=\"token punctuation\">(</span>formatString<span class=\"token operator\">:</span> <span class=\"token string\">\"MMMM DD, YYYY\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span>\n                fields <span class=\"token punctuation\">{</span>\n                    slug\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%ED%8F%AC%EC%8A%A4%ED%8C%85-%EA%B8%B0%EB%B3%B8-%EA%B5%AC%EC%A1%B0\">포스팅 기본 구조</a></li>\n<li><a href=\"#%EC%A4%91%EC%9A%94-%ED%8F%AC%EC%8A%A4%ED%8C%85-%EC%95%88%EC%97%90-%EC%9C%BC%EB%A1%9C-%EC%A0%9C%EB%AA%A9%EC%9D%B4-%EC%97%86%EC%9C%BC%EB%A9%B4-%EC%95%84%EB%9E%98-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D\">(중요) 포스팅 안에 <code class=\"language-text\">##</code>으로 제목이 없으면 아래 오류 발생</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0-%ED%8F%AC%EC%8A%A4%ED%8A%B8-%EC%A1%B0%ED%9A%8C-query\">(참고) 포스트 조회 Query</a></li>\n</ul>\n</div>","frontmatter":{"date":"June 18, 2022","title":"이 블로그 스킨에 대한 이해 with React, GraphQL","categories":"블로그-발전기","author":"주녘씨","emoji":"🔮"},"fields":{"slug":"/understanding-blog/"}},"prev":{"id":"25da3082-99dc-5245-b0ad-e681e2192fe3","html":"<h2 id=\"사전준비\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%A0%84%EC%A4%80%EB%B9%84\" aria-label=\"사전준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>사전준비</strong></h2>\n<p>아래 코드를 터미널에서 실행시켜서 플러그인을 설치하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install\n\n>npm install gatsby@^4.9.3\n\nnpm install gh-pages --save-dev\n\nnpm install copyfiles</code></pre></div>\n<p>각각 설치하는 내용은 아래와 같다.</p>\n<p>P.S 이 스킨은 4.9.3버전까지만 동작하는듯 하다. (버전을 잘 확인하자)</p>\n<ul>\n<li>\n<p>gatsby : 리액트(React) 기반의 정적 사이트 생성 프레임워크</p>\n</li>\n<li>\n<p>gh-pages : GitHub Repository를 이용해 웹 사이트를 무료로 호스팅해주는 서비스</p>\n</li>\n<li>\n<p>copyfiles : npm에서 파일 복사를 도와주는 패키지 (개인 도메인이 있는 경우)</p>\n</li>\n</ul>\n<br/>\n<hr>\n<h2 id=\"개인-도메인-설정\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9D%B8-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%84%A4%EC%A0%95\" aria-label=\"개인 도메인 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>개인 도메인 설정</strong></h2>\n<p>필자처럼 개인 도메인(ooo.com, xxx.net)을 구매한 사람은</p>\n<p>GitHub repository의 <code class=\"language-text\">pages</code>에서</p>\n<p>접근 주소를 개인도메인으로 설정해줄 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACfUlEQVQ4y3VT23KbMBTkuTEGJHQHCcTFgE3SJE3SmbaP7Xv7U/3s7UjYrtOZPuysrMHLnj1LwpRDKS12OUdaiMgFq+CGFX68h6p8vM+oeg+ycU4V9oVEGv6fCySldOC6uYoF7EuNwo7grof2PWTTQTgP1Q7xrJru5q4DNRYpk9iXEgnTDdrxBGX7KBrekjIBMlro0wizjmDLBDIvoMuMfHDIvEbeGeRdFVH0NYqhRu5McGgh6w4FM1eXhFfQzYBCGBBZnVGfsZ0zYeMkKRVIqdyYCCRBTNseH/blTYYGw/wRy8Mr+ukB4/EJ8/oJ1s+o3AAqLDLeIiX6GtMFiXZDHPkidpex6HBcHtEMx5hviEWYNnLGG+wKiV1WbosIMd0gsf0R7XCMmw5CF0zrc3QYhPKwJGa2WMoaKVHYZezsir1rSKLsEF2Eh4NQqELgbnqA7ZY4XqgWP7sUOpxdvGPKohANMuaubpPwoOtmyMqDijqOnFEJ3x/QjxO4NKDSwTQHHPwEqdroMCsNMqqREoNdoXGXcdyFHgrjoeruxrpEQQWs4XC1hK0klFaQUkBIDs4ZhOAQgt2AQ0oOxjkSUXkYN8RR0yJkIkAow9JzfHlb8fVtxbfPG768LpjaErMPYJh8iSkyw9IxeMu2kZt+ifnELYceMo3GDzC2AQklLzlIKTYwCVLKeKZs46LkETnlSEJmoYOBL5vaUwVZe9huju7D4rQ7RJZuBrcTSlHHb/7vByGwC0v5t0dRkEj8/PUby9N3dOsbhtMLDqfnWPBhecRhfUE9PEI0R8j2BNmuUO0JTLf/E1SYTz8gmnsQ5UGEjfW5IPwmsgVVHlS1VxS8wh9u74XwYtLlVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이미지\"\n        title=\"이미지\"\n        src=\"/static/6ebfe66c49a106663febbbc34e62d404/37523/capture.png\"\n        srcset=\"/static/6ebfe66c49a106663febbbc34e62d404/e9ff0/capture.png 180w,\n/static/6ebfe66c49a106663febbbc34e62d404/f21e7/capture.png 360w,\n/static/6ebfe66c49a106663febbbc34e62d404/37523/capture.png 720w,\n/static/6ebfe66c49a106663febbbc34e62d404/d7ab4/capture.png 1014w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Source항목은 호스팅될 브랜치를 설정하는 곳으로</p>\n<p>필자는 <code class=\"language-text\">master</code> 브랜치에서는 기능 추가와 포스트 작성,</p>\n<p><code class=\"language-text\">gh-pages</code>에는 build 결과물을 배포(deploy)하도록 했다.</p>\n<p><br/><br/></p>\n<p>하지만 <code class=\"language-text\">한가지 문제점</code>이 있는데,</p>\n<p>매번 배포할 때마다 Custom Domain 항목이 초기화된다는 점이다.</p>\n<p>이 문제는 도메인이 적힌 CNAME 파일이</p>\n<p>빌드 결과물에 포함되지 않아서 발생하는 문제이다.</p>\n<p>필자는 <code class=\"language-text\">아래 과정을 통해 문제를 해결</code>하였다.</p>\n<p><br/><br/></p>\n<hr>\n<h2 id=\"packagejson에-대한-이해\" style=\"position:relative;\"><a href=\"#packagejson%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4\" aria-label=\"packagejson에 대한 이해 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>package.json에 대한 이해</strong></h2>\n<p>다음은 package.json에서 빌드 시 설정할 부분이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"repository\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"git\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/junwork123/junwork123.github.io.git\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"serve\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby serve\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby clean &amp;&amp; gatsby build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"copy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"copyfiles CNAME public/ &amp;&amp; echo 'CNAME file copied.'\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run build &amp;&amp; gatsby serve\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run build &amp;&amp; npm run copy &amp;&amp; gh-pages -d public -b gh-pages\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"echo \\\"Write tests! -> https://gatsby.dev/unit-testing\\\" &amp;&amp; exit 1\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h2 id=\"--repository\" style=\"position:relative;\"><a href=\"#--repository\" aria-label=\"  repository permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>- repository</h2>\n<p>배포될 원격 저장소의 주소를 나타낸다.</p>\n<p>github repository 메인페이지에서 쉽게 복사할 수 있다.</p>\n<p>SSH를 사용할 경우 암호키-공개키를 활용하여 Push해야한다.(번거로움)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACy0lEQVQ4y41UyXbTQBDUPYl3WautxZJsSbZked+X4ORhEh5wAK5cOXHlw7hy4sMKumU5zmJeDvVaM6OpV93VPcJVUUKGy0IV+bICUTFQkesQFRNV1URR1FCWDmvN4vOSqKPSMaFsm5CXLuSNh6KpQyCSDBd5EQVRQzJeY3P7Hrv9J7y5vYes23DDPvYfv2L/4QvGiy1qtRa8nxN8/vMd337/wOTXPdR3PoRcSU7VFSVc5KusRtJsSLp9jKS2qlqQ9MbDnmSg2m1AvwmgbVrQdwFKVg1C3Qlht2I4fgIv7EGqORBV6xGqms14uidKFiolA4riQtdayBUUCETmR0P48QjzzVuohoeKbDwjOJKcRlKqmai7IaxmB7myDCH7gYhKUp3TUuouX1AMD3LNYWTKM7WnILPoLF9RIdDP3eEC690dHL8LuxmhP90w8WC2xXixQzJawg17KJNyvfFA9kR9vqxC0OsuItdHx2nCsz1UFPNFZBeJ9HSPDKqyUY2UkBZukKA3WcML+6wmGa8QxCPEwwWje4hhMkFvvEKnP+N/6o0gvTNeQTObyJWVNGU6IHNMt82x0YrT6HfZ/cahFJbX4U6gM8MJue4124fhtLnuNBQCbTpBAtPrMGF6OWZYzSglakZMbLqd45rSzVIvH7rimDK5W6zWGAVR55ivaCiKOq+zvdMWkk7NyWpILpN06kGqD8XuaIlOb8q1avemx28/Gr3YMqe9yQqpLu1kymZE/RlfjgZzbpl4kBoymG4QD+as4qVefERIi6uScsRlkWZb5kjIlVVOl8pyTuGzlKfrW1Y2Wd1gOL/GeLnj5l5s92gnEy58pu4cjgpVo4kgHvOU0DRQpNmm3qSaUkkq/A7ar1NIH5TOqdMEagXaew3ZI0JSQAYMZ1usdnec5vJ6zyZkZP9L9VnK1OE0NrrV4okh1BoBvzDnXpezCv8R/gVjPS59IGqo3wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"repo.png\"\n        title=\"repo.png\"\n        src=\"/static/d98bf321a7640123c8beb3c5fa36ae33/13ae7/repo.png\"\n        srcset=\"/static/d98bf321a7640123c8beb3c5fa36ae33/e9ff0/repo.png 180w,\n/static/d98bf321a7640123c8beb3c5fa36ae33/13ae7/repo.png 350w\"\n        sizes=\"(max-width: 350px) 100vw, 350px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"--scripts\" style=\"position:relative;\"><a href=\"#--scripts\" aria-label=\"  scripts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>- scripts</h2>\n<p><code class=\"language-text\">npm run OOO</code>으로 동작하는 명령어들이다.</p>\n<p><code class=\"language-text\">&amp;&amp;</code>로 명령어를 여러개 연결할 수 있으며</p>\n<p>같은 명령어이기만 하면 <code class=\"language-text\">pre</code>를 붙여서 먼저 실행하도록 하게 할 수 있다.</p>\n<p><br/><br/></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"build\": \"gatsby clean &amp;&amp; gatsby build\",</code></pre></div>\n<p>예를 들어 위의 명령어는 <code class=\"language-text\">npm run build</code>로 실행할 수 있고,</p>\n<p>그 결과는 <code class=\"language-text\">빌드 결과물 제거</code> &#x26;&#x26; <code class=\"language-text\">빌드 시작</code>으로 치환되는 것이다.</p>\n<p><br/><br/></p>\n<p>그렇다면 <code class=\"language-text\">deploy</code> 명령어의 마지막에 주목해보자.</p>\n<p>해석하자면 <code class=\"language-text\">public</code> 폴더안의 결과물을 <code class=\"language-text\">gh-pages</code> 브랜치에 배포하겠다는 뜻이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gh-pages -d public -b gh-pages</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 아래는 키워드 부연설명</span>\n<span class=\"token operator\">-</span>d<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>dir <span class=\"token operator\">:</span> <span class=\"token function\">basePath</span><span class=\"token punctuation\">(</span>빌드 결과물<span class=\"token punctuation\">,</span> 배포될 파일들 위치<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">-</span>b<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>branch <span class=\"token operator\">:</span> options<span class=\"token punctuation\">.</span><span class=\"token function\">branch</span><span class=\"token punctuation\">(</span>배포될 브랜치<span class=\"token punctuation\">,</span> 여기서는 브랜치명이 <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gh-pages</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">-</span>s<span class=\"token punctuation\">,</span> <span class=\"token operator\">--</span>src <span class=\"token operator\">:</span> options<span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span>배포될 파일들의 매칭패턴<span class=\"token punctuation\">,</span> 기본은 <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">**/*</span><span class=\"token template-punctuation string\">`</span></span>로 전체 파일이다<span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>더 자세한 설명은 <a href=\"https://www.npmjs.com/package/gh-pages-cli\">공식 메뉴얼</a>에서 확인할 수 있다.</p>\n</blockquote>\n<p><br/><br/></p>\n<p>따라서 <code class=\"language-text\">npm run deploy</code>를 실행하면,</p>\n<p>아래 과정을 명령어 한번에 진행할 수 있다.</p>\n<h3 id=\"code-classlanguage-text이전-빌드-결과-제거code--code-classlanguage-text빌드code--code-classlanguage-text개인도메인-주소-설정code--code-classlanguage-text배포code\" style=\"position:relative;\"><a href=\"#code-classlanguage-text%EC%9D%B4%EC%A0%84-%EB%B9%8C%EB%93%9C-%EA%B2%B0%EA%B3%BC-%EC%A0%9C%EA%B1%B0code--code-classlanguage-text%EB%B9%8C%EB%93%9Ccode--code-classlanguage-text%EA%B0%9C%EC%9D%B8%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A3%BC%EC%86%8C-%EC%84%A4%EC%A0%95code--code-classlanguage-text%EB%B0%B0%ED%8F%ACcode\" aria-label=\"code classlanguage text이전 빌드 결과 제거code  code classlanguage text빌드code  code classlanguage text개인도메인 주소 설정code  code classlanguage text배포code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">이전 빌드 결과 제거</code> > <code class=\"language-text\">빌드</code> > <code class=\"language-text\">개인도메인 주소 설정</code> > <code class=\"language-text\">배포</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"deploy\": \"npm run build &amp;&amp; npm run copy &amp;&amp; gh-pages -d public -b gh-pages\",</code></pre></div>\n<p><br/><br/></p>\n<hr>\n<h2 id=\"다음으로\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%9D%8C%EC%9C%BC%EB%A1%9C\" aria-label=\"다음으로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다음으로</h2>\n<br/>\n<p>하지만 명령어를 일일히 입력하는게 <code class=\"language-text\">자동화</code>라고 할 수 있을까?</p>\n<p>이마저도 귀찮다면?</p>\n<p>포스팅 작성 후 커밋만으로</p>\n<p>배포까지 한번에 끝낼 수 있는 방법도 있다.</p>\n<p><em><a href=\"\">다음 2편</a>에 계속..</em></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%82%AC%EC%A0%84%EC%A4%80%EB%B9%84\"><strong>사전준비</strong></a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%9D%B8-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%84%A4%EC%A0%95\"><strong>개인 도메인 설정</strong></a></p>\n</li>\n<li>\n<p><a href=\"#packagejson%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4\"><strong>package.json에 대한 이해</strong></a></p>\n</li>\n<li>\n<p><a href=\"#--repository\">- repository</a></p>\n</li>\n<li>\n<p><a href=\"#--scripts\">- scripts</a></p>\n<ul>\n<li><a href=\"#%EC%9D%B4%EC%A0%84-%EB%B9%8C%EB%93%9C-%EA%B2%B0%EA%B3%BC-%EC%A0%9C%EA%B1%B0--%EB%B9%8C%EB%93%9C--%EA%B0%9C%EC%9D%B8%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A3%BC%EC%86%8C-%EC%84%A4%EC%A0%95--%EB%B0%B0%ED%8F%AC\"><code class=\"language-text\">이전 빌드 결과 제거</code> > <code class=\"language-text\">빌드</code> > <code class=\"language-text\">개인도메인 주소 설정</code> > <code class=\"language-text\">배포</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%9D%8C%EC%9C%BC%EB%A1%9C\">다음으로</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 20, 2022","title":"블로그 빌드 및 배포 자동화 - 1","categories":"블로그-발전기","author":"주녘씨","emoji":"🔮"},"fields":{"slug":"/understanding-blog2-1/"}},"site":{"siteMetadata":{"siteUrl":"https://www.junwork.net","comments":{"utterances":{"repo":"https://github.com/junwork123/junwork123.github.io.git"}}}}},"pageContext":{"slug":"/understanding-blog2-2/","nextSlug":"/understanding-blog/","prevSlug":"/understanding-blog2-1/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}