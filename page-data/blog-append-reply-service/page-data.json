{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog-append-reply-service/","result":{"data":{"cur":{"id":"da977ffe-7f7d-55b0-a2e6-b645b6838951","html":"<h2 id=\"블로그에-댓글-기능을-추가해보자\" style=\"position:relative;\"><a href=\"#%EB%B8%94%EB%A1%9C%EA%B7%B8%EC%97%90-%EB%8C%93%EA%B8%80-%EA%B8%B0%EB%8A%A5%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"블로그에 댓글 기능을 추가해보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>블로그에 댓글 기능을 추가해보자</h2>\n<p>우리가 선택할 수 있는 패키지는 다음과 같다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%B8%94%EB%A1%9C%EA%B7%B8%EC%97%90-%EB%8C%93%EA%B8%80-%EA%B8%B0%EB%8A%A5%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%B4%EB%B3%B4%EC%9E%90\">블로그에 댓글 기능을 추가해보자</a></li>\n</ul>\n</div>","excerpt":"블로그에 댓글 기능을 추가해보자 우리가 선택할 수 있는 패키지는 다음과 같다. 블로그에 댓글 기능을 추가해보자","frontmatter":{"date":"June 26, 2022","title":"블로그에 댓글 기능 추가하기","categories":"블로그-발전기","author":"주녘씨","emoji":"🔮"},"fields":{"slug":"/blog-append-reply-service/"}},"next":{"id":"3486ce02-aa0c-5311-8f5c-e41d308ba4c4","html":"<h2 id=\"자동-배포-권한을-얻기-위한-토큰-생성\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%8F%99-%EB%B0%B0%ED%8F%AC-%EA%B6%8C%ED%95%9C%EC%9D%84-%EC%96%BB%EA%B8%B0-%EC%9C%84%ED%95%9C-%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1\" aria-label=\"자동 배포 권한을 얻기 위한 토큰 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>자동 배포 권한을 얻기 위한 토큰 생성</strong></h2>\n<p>먼저 GitHub 계정의 <a href=\"https://github.com/settings/apps\">Developer settings</a> 메뉴에서 토큰(Personal access tokens)을 만들어야 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABCElEQVQY022QzW7DIBCEfW3iGGxYFmPAP0lqp8mp7/9uU7Guox56GI1A2m93plL+ChMWhHyDCzMuLYtq7XBW9Pbj/6/O2uGjsTgVaYeTIlSN6WH7ES0NMnzAOhdhfRY3Pu2A3wUXTThrQnARz3nFY7wj9yNCmFAZP2F9fSNOn1DGQ9tehniYkeYVcV6Rlg3UTzA+yxLNM2ozgCngOX5iS1eBMydUFO/Iy4bx9hAv1zSdR+cnqcBy2uWTwA5gY5NcWeLWLcO4CFeAtd5j1IrekYqsjwjDAHIM7xmqK53xO/KldbK4SNkAOoD/lb0DMzhvoPwE5Qdc/gJPL9iw7L1yhuEkXt6tiwL+AcAEl3s1dJzeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면\"\n        title=\"메뉴 진입 화면\"\n        src=\"/static/5f2ccbc848bdeb95899d3837e9c8f4bc/37523/setting.png\"\n        srcset=\"/static/5f2ccbc848bdeb95899d3837e9c8f4bc/e9ff0/setting.png 180w,\n/static/5f2ccbc848bdeb95899d3837e9c8f4bc/f21e7/setting.png 360w,\n/static/5f2ccbc848bdeb95899d3837e9c8f4bc/37523/setting.png 720w,\n/static/5f2ccbc848bdeb95899d3837e9c8f4bc/eb2af/setting.png 954w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><br/><br/></p>\n<p><code class=\"language-text\">Generate new token</code> 버튼을 누르게 되면,</p>\n<p>아래와 같은 화면이 나타나지만 어려울 것 하나없다!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 649px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACSElEQVQ4y41U226jMBTkYatumwQS7jZgG2wggVzUy3allfZ5//+LZnUOSZuqadOHEQeDxzPnYk9UDlK1kJWDUC1EZRlZ2aCqeyxjifkyxWKVXQX959FmbQfoZgPtRpSmg7YblKZF0w6I0gL3foR5EGO+TPg54/fkHdEp9jLlYLot6nYL4wbYfsdQ3QFV9wjdP8Csnxhv8TN0d4BxGxag7IYFrWIJ76UdcXAjpCa7DoXuUOgWidog1juE5Rph0SMs1lNcbhBWI1a5hb/K4If5K1jhXmhoP4J3M8PNzwV+3M4ZNwxam7/hdoa72RLz1xSkH+AlkYBICoRZxafcLyLO2YR4eh7X7hYRZsFZgS4Uy/vrBvzb/8JaaNwfLVyuYo7F8dtXVfeKrMKLGyAiAT+WSIRGIgwSaRALjTif3k9E11rIezY9fnc7PKv2ooXz1vgOvEPd48/2Cbv1HsoOqEwP7QZuIerPRO8Rqh0ifUCk94xV0R8P/5gez2UVrGpxGyTvmtUPxdG+ZvtZUXO8WH3ugvLv+bGAanr04yOkcrw4CxIsk4J7cupPiyASV+2ywmUsUJkOTbeDVJYJ6SPNMDV6TrOtHKKs+rIgb4TRpNCu9wjTktVNhAVPDCmky4Msf1OhRF42KEzLlk8nkuWU8iYN547iazcP5zDOFepuy2T086mxT5bpGiN1WWmZ+Hx2L4EJm25EPz6wUrJMLREcCSl/lMe8tNPlYTrQnosqiTAIc7ZV1j0Tvlo+TQ1bNkxCk5NKg1TWXPVLlv8DzO/IhBCu7AoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면2\"\n        title=\"메뉴 진입 화면2\"\n        src=\"/static/f3b393305cc5c4da76738e4f80a9c5c5/7762d/setting2.png\"\n        srcset=\"/static/f3b393305cc5c4da76738e4f80a9c5c5/e9ff0/setting2.png 180w,\n/static/f3b393305cc5c4da76738e4f80a9c5c5/f21e7/setting2.png 360w,\n/static/f3b393305cc5c4da76738e4f80a9c5c5/7762d/setting2.png 649w\"\n        sizes=\"(max-width: 649px) 100vw, 649px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>Note : 이 토큰의 목적(설명)</p>\n</li>\n<li>\n<p>Expiration : 토큰의 만료기간(최소 7일 / Custom - 년도지정 / No Expiration - 무제한)</p>\n</li>\n<li>\n<p>Select scopes : 이 토큰으로 할 수 있는 활동들(우리는 <code class=\"language-text\">repo</code>만 체크해도 된다.)</p>\n</li>\n</ul>\n<p><br/><br/></p>\n<p>그리고 나서 우리는 발급받은 토큰을 해당 프로젝트에 등록하러 갈 것이다.</p>\n<p>스크린샷을 따라 등록해보자</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABoElEQVQ4y51T2W7cMAz0e7Zr2dZ9+9h1um2KAv3/b5uCtLNxm02A9mFAiZIoDodspM0YbIY8QLuCUhZIHfAkNL505kOchMZTq9jSvtG+QkjHm3Nv2do4IdUr0riiHRxf/hsUREiP8fqCy+0nYr2yv1G+olPh/gNZm2bk6StCuXBwE0b4vMCGCTbO7KdE6MznC+97HbeAsa6ol28YTLoHpcfko4suLwxP6zTDpQU+zZDhAmFGnA/MOKAOI//25lTQYWIqeb5B+RHSVagD5AG9yTvSVsOy3DhdqgkXWhi0ykPViiFnnKXDuT/CoteJxaN3G8PvoNJtlMeVMzwd1ewNhAosyCNlyd9Kz5a7goX1bwGp6K8BKVMTZ0zrD4S6QrryB0WGLRhsYfuOMqnWSsdKcx2FhtAefUroYuQzzmgH0R5M5lqSjdMzRuoGV7hnG1KOFFSucMB7LfsdDyjTvVcQVULb243y+vKL24My6U1Ep/eeFJtAH03HI+yUJ86O6Ii90Kfu83H7bAybUK93lY8/Hdf/goamIk3P78bvfzKkgL8BflJfttqCDkAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면4\"\n        title=\"메뉴 진입 화면4\"\n        src=\"/static/8a28e33c193f41876b0b86bab4d8a71d/37523/setting4.png\"\n        srcset=\"/static/8a28e33c193f41876b0b86bab4d8a71d/e9ff0/setting4.png 180w,\n/static/8a28e33c193f41876b0b86bab4d8a71d/f21e7/setting4.png 360w,\n/static/8a28e33c193f41876b0b86bab4d8a71d/37523/setting4.png 720w,\n/static/8a28e33c193f41876b0b86bab4d8a71d/22475/setting4.png 1039w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAByElEQVQ4y3VTy27bMBDUuXZMUaT4JmXrYSkNipza5Fig//9NU+zqgTZxDguR1HJ2Z2ZZaVeQbzNsvMFsoVwHFSa47gWNH+BSj1Am+DwgdhOUzTjXBk/SfopKtgmhjGhsQmMSJ9dthIojVLrD5DuDrQWvXFC28WvAWgeU/hnpeselcTiJln9QJ12/oPQLXB4YZAeinC8BhfKwsecOaE2HlKxIimFB6CZQUQKrN1BpEgc18JAydUFgJ7FWPQsDpTKCHyGEhzKZpaBoSBIdOP8jIO0rSriOLysdaXCRDk/KIv6a0f95RXibUdvIINQhfeniR8o7eGXyhPH5Fbmf2RhyXRgP/3PC7fcPxPcZZ2VwurSs3a7fv0Fn3y6a1xU5S+MglDs0pGreDxzWrto+DB04n5wnY4klu0yAFCZcDwpkivIF2hcep91l0pxNaWnMMhcnbX0ZIVQgUyK68Ttf2nW5KI/Y3VFuC0IeGegA3cDkpid92aDNJAZcKfv/hBY+oU4ZMqSNYjioEpD2HXemXbcWTz2kDitlenq5Xw73RG0xuIQ5ZLTa4VR/HuB9dBjcFbRbp9Xu1J7I69rAq4BBR0g6e/Ai9juH09v+L2AgR79NTOZAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면5\"\n        title=\"메뉴 진입 화면5\"\n        src=\"/static/854e0000b0fee3675cfa3b66ef22fe92/37523/setting5.png\"\n        srcset=\"/static/854e0000b0fee3675cfa3b66ef22fe92/e9ff0/setting5.png 180w,\n/static/854e0000b0fee3675cfa3b66ef22fe92/f21e7/setting5.png 360w,\n/static/854e0000b0fee3675cfa3b66ef22fe92/37523/setting5.png 720w,\n/static/854e0000b0fee3675cfa3b66ef22fe92/23592/setting5.png 1031w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><br/><br/></p>\n<hr>\n<h2 id=\"github-action에서-yml-스크립트-작성하기\" style=\"position:relative;\"><a href=\"#github-action%EC%97%90%EC%84%9C-yml-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"github action에서 yml 스크립트 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>GitHub Action에서 yml 스크립트 작성하기</strong></h2>\n<br/>\n<p>이제 배포할 <code class=\"language-text\">repogitory의 actions 메뉴</code>로 가보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.222222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAeUlEQVQI1z2MzQ6CMBjAuKuRMeGD/Y+JYQlE4/u/W0128NBLk7ZTklC2opYNHQ50ONHpg7jKLJ6bEi73ES0em164vJO3A3ErPu+YuDUfSmUQT9ePlnGJjWFyiCtEk3iHwjc+Cb7wWCKTSWgJiM1tLnZtzexWrv305weVKTSz2u3wxAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면3-0\"\n        title=\"메뉴 진입 화면3-0\"\n        src=\"/static/6b0f770fd759d70d266f24fb2ebdd820/37523/setting3-0.png\"\n        srcset=\"/static/6b0f770fd759d70d266f24fb2ebdd820/e9ff0/setting3-0.png 180w,\n/static/6b0f770fd759d70d266f24fb2ebdd820/f21e7/setting3-0.png 360w,\n/static/6b0f770fd759d70d266f24fb2ebdd820/37523/setting3-0.png 720w,\n/static/6b0f770fd759d70d266f24fb2ebdd820/59822/setting3-0.png 916w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB2ElEQVQoz41Sy27UMBTNprSdmTztxLGd99OTdDIzKqpUVhUSGxYsWLFDiC9A8P8H+QaVqmoRiyPr6r7OPT5Otz+i6mf08xmNOaI1RwzTGZ1Z0IwLvbEssfE4dkGCrR+/CJtzQwGn3Z/QDjPMfkHXTejHG9RmHdQMB/TTCbrsESU5uCzB0wJM5GCiINjYwmeShjpd3mASNQbZw+gRe9lCRSk2dmOQUJEXpdTwL1h2NFAmGVpRoBIluqRAHWfgUYrtk4H/CzrZYwouV3CZxKXLcOVz7EJByeewTN1Xco8MrUZlu0fRGNT9jLweqfH5div8m03wIrNrl+NyG60MZdGBpTmiJEPAFMxyQt4MVBjEGgFX9NqPWM53FPtcIUwy6rH65fUAM5/ICU49HKCKDj6XuLgK8OnLZ9w/PCBgGsvbd1hu78lGWdXjx89fZCFdjTCHWzTDDRJV4/2Hj/j67TsurgM4saoQxho8LckWdtDGi4lRVo2QeYdEVYhEhl1oNUz/svzDPOBrD52c1QZlNz2KykSGOJXku+l4Rx60ORvrooTPBGJZoRkPNNBqGyUaQmt4kYCT5i2yaiAt7GfYoii23lLQ5UAnrV6UYEJTjb0mbwxpaJetGiti+BsUwx1T4x2ytQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"메뉴 진입 화면3\"\n        title=\"메뉴 진입 화면3\"\n        src=\"/static/acb33d26b15ffc80581c80a7f622d842/37523/setting3.png\"\n        srcset=\"/static/acb33d26b15ffc80581c80a7f622d842/e9ff0/setting3.png 180w,\n/static/acb33d26b15ffc80581c80a7f622d842/f21e7/setting3.png 360w,\n/static/acb33d26b15ffc80581c80a7f622d842/37523/setting3.png 720w,\n/static/acb33d26b15ffc80581c80a7f622d842/136a2/setting3.png 884w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>스크린샷 처럼 <code class=\"language-text\">set up a workflow yourself</code> 메뉴를 누르면</p>\n<p>드디어 최종장에 돌입하게 된다. <del>필자는 이 메뉴 찾는데 10분이나 걸렸다</del></p>\n<p>결론적으로 GitHub Action을 통한 자동 배포는</p>\n<p>yml 스크립트를 <code class=\"language-text\">.github/workflows/</code> 위치에 작성해야 한다.</p>\n<blockquote>\n<p>배울게 또 늘어나? 😵</p>\n</blockquote>\n<p>싶겠지만(<del>싫겠지만</del>) 생각외로 간단하니 조금만 더 읽어보자.</p>\n<p>(바로 적용하고 싶다면 설명은 건너뛰고 <a href=\"#code\">실제 반영 코드</a> 위주로 보아도 좋다)</p>\n<p>예시를 통해 각 키워드마다 의미를 빠르게 파악하고 응용하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Blog Deployment <span class=\"token comment\"># 이 스크립트의 제목</span>\n\n    <span class=\"token comment\"># 어떤 행동을 할때마다 실행할지</span>\n    <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> \n        <span class=\"token comment\"># master, release/v*라는 이름의 브랜치에 push가 발생할 때마다</span>\n        <span class=\"token comment\"># ex) release/v0.1, release/v2.1.5</span>\n        <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> \n                <span class=\"token punctuation\">-</span> master\n                <span class=\"token punctuation\">-</span> release/v*\n        \n        <span class=\"token comment\"># gh-pages 브랜치에 pull_request가 발생할 때마다</span>\n        <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> \n                <span class=\"token punctuation\">-</span> gh<span class=\"token punctuation\">-</span>pages\n\n        <span class=\"token comment\"># cron 표현식으로 `UTC 기준 매일 월~금 오전2시에 실행`</span>\n        <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span> \n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">cron</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0 0 2 ? * MON-FRI *\"</span>\n\n        <span class=\"token comment\"># 직접 \"Run workflow\"버튼을 누를때만 실행</span>\n        <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span> \n\n    <span class=\"token comment\"># 실행할 작업을 정의</span>\n    <span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># 'build'라는 이름의 job은 (job이름은 맘대로 적어도 됨)</span>\n        <span class=\"token comment\"># 'Checkout, Install, Build'라는 이름의 작업을</span>\n        <span class=\"token comment\"># 우분투 최신버전에서 동작시킨다.</span>\n        <span class=\"token comment\"># 동작내용은 </span>\n        <span class=\"token comment\"># [브랜치 체크아웃 </span>\n        <span class=\"token comment\">#   > 패키지 설치 </span>\n        <span class=\"token comment\">#   > 빌드 </span>\n        <span class=\"token comment\">#   > 메시지 출력</span>\n        <span class=\"token comment\">#   > 도메인 복사</span>\n        <span class=\"token comment\">#   > 배포] 순으로 진행된다.</span>\n\n        <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span> \n            <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout<span class=\"token punctuation\">,</span> Install<span class=\"token punctuation\">,</span> Build\n\n            <span class=\"token comment\"># 다음 동작을 순서대로 실행</span>\n            <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n                <span class=\"token comment\"># 'uses' == 누군가 미리 정의된 workflow@version 사용</span>\n                <span class=\"token comment\"># 'master' 브랜치를 체크아웃()</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout branche\n                  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@master\n                \n                <span class=\"token comment\"># 패키지 설치 동작 </span>\n                <span class=\"token comment\"># [node 설치 </span>\n                <span class=\"token comment\">#   > 의존성 캐시검사 </span>\n                <span class=\"token comment\">#   > (변화가 있다면) npm설치] 순으로 동작</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js\n                  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@master\n                  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                      <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> 16.x\n\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Cache node modules\n                  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/cache@v2\n                  <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> cache\n                  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                      <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> node_modules\n                      <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> npm<span class=\"token punctuation\">-</span>packages<span class=\"token punctuation\">-</span>$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> hashFiles('<span class=\"token important\">**/package-lock.json')</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Dependencies\n                  <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.cache.outputs.cache<span class=\"token punctuation\">-</span>hit <span class=\"token tag\">!=</span> 'true'\n                  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n\n                <span class=\"token comment\"># 빌드 실행</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n                  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build\n                    \n                <span class=\"token comment\"># 도메인 설정파일을 빌드결과물에 복사</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> copy Cname\n                  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> cp CNAME public/ \n\n                <span class=\"token comment\"># 특정 유저의 배포 액션을 이용하여</span>\n                <span class=\"token comment\"># 빌드 결과물을 배포 경로에 복사한다.</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy changes\n                  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages@v3 \n                  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                      <span class=\"token key atrule\">github_token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GITHUB_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                      <span class=\"token key atrule\">publish_dir</span><span class=\"token punctuation\">:</span> ./public\n                      <span class=\"token key atrule\">publish_branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages <span class=\"token comment\"># default: gh-pages</span></code></pre></div>\n<br/>\n<h2 id=\"반영된-실제-yml-코드-span-idcodespan\" style=\"position:relative;\"><a href=\"#%EB%B0%98%EC%98%81%EB%90%9C-%EC%8B%A4%EC%A0%9C-yml-%EC%BD%94%EB%93%9C-span-idcodespan\" aria-label=\"반영된 실제 yml 코드 span idcodespan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>반영된 실제 YML 코드 <span id=\"code\"></span></h2>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Blog Deployment\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> \n    <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> \n            <span class=\"token punctuation\">-</span> master\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span> \n        <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout<span class=\"token punctuation\">,</span> Install<span class=\"token punctuation\">,</span> Build\n        <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout branche\n              <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@master\n            \n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js\n              <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@master\n              <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> 16.x\n\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Dependencies\n              <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>force\n\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n              <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build\n                \n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> copy Cname\n              <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> cp CNAME public/ \n\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy changes\n              <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages@v3\n              <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">github_token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GITHUB_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                  <span class=\"token key atrule\">publish_dir</span><span class=\"token punctuation\">:</span> ./public\n                  <span class=\"token key atrule\">publish_branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages</code></pre></div>\n<p>cache 옵션을 사용하지 않았을 때 빌드&#x26;배포 시간 : 5분</p>\n<p>cache 옵션을 사용했을 때 빌드&#x26;배포 시간 : 2분</p>\n<p><code class=\"language-text\">캐시옵션의 성능은 엄청났다!</code></p>\n<p><br/><br/></p>\n<p>만약 아래와 같은 에러가 발생했다면</p>\n<p>npm install <code class=\"language-text\">--force</code> 명령어로 강제 설치 옵션을 주면 문제없이 진행된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">Run npm install\n  npm ERR<span class=\"token tag\">!</span> code ERESOLVE\n  npm ERR<span class=\"token tag\">!</span> ERESOLVE could not resolve\n  npm ERR<span class=\"token tag\">!</span> \n  <span class=\"token key atrule\">npm ERR! While resolving</span><span class=\"token punctuation\">:</span> gatsby<span class=\"token punctuation\">-</span>plugin<span class=\"token punctuation\">-</span>advanced<span class=\"token punctuation\">-</span>sitemap@2.0.0\n<span class=\"token punctuation\">...</span></code></pre></div>\n<p><br/><br/></p>\n<p>더 자세한 내용은 아래를 참조하자</p>\n<blockquote>\n<p><a href=\"https://dailyco.tech/share/gatsby-blog-auto-deploy/\">많은 도움이 된 블로그</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://fe-developers.kakaoent.com/2022/220106-github-actions/\">카카오웹툰은 GitHub Actions를 어떻게 사용하고 있을까?</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://docs.github.com/en/actions/learn-github-actions/expressions\">Actions의 표현식</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows\">Actions의 이벤트</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"cron.png\">cron 표현식</a> // 이건 여러군데서 쓰이니 알아두면 좋을거야!</p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%9E%90%EB%8F%99-%EB%B0%B0%ED%8F%AC-%EA%B6%8C%ED%95%9C%EC%9D%84-%EC%96%BB%EA%B8%B0-%EC%9C%84%ED%95%9C-%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1\"><strong>자동 배포 권한을 얻기 위한 토큰 생성</strong></a></li>\n<li><a href=\"#github-action%EC%97%90%EC%84%9C-yml-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\"><strong>GitHub Action에서 yml 스크립트 작성하기</strong></a></li>\n<li><a href=\"#%EB%B0%98%EC%98%81%EB%90%9C-%EC%8B%A4%EC%A0%9C-yml-%EC%BD%94%EB%93%9C-span-idcodespan\">반영된 실제 YML 코드 <span id=\"code\"></span></a></li>\n</ul>\n</div>","frontmatter":{"date":"June 23, 2022","title":"블로그 빌드 및 배포 자동화 - 2","categories":"블로그-발전기","author":"주녘씨","emoji":"🔮"},"fields":{"slug":"/blog-build-deploy-2/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://www.junwork.net","comments":{"utterances":{"repo":"https://github.com/junwork123/junwork123.github.io.git"}}}}},"pageContext":{"slug":"/blog-append-reply-service/","nextSlug":"/blog-build-deploy-2/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}