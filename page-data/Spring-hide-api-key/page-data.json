{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/Spring-hide-api-key/",
    "result": {"data":{"cur":{"id":"2c5befa3-c7d5-5313-8a59-606c93f8385c","html":"<p>지적과 댓글은 언제나 환영합니다!</p>\n<p><br/><br/></p>\n<h1 id=\"스프링-api-key를-숨겨보자\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-api-key%EB%A5%BC-%EC%88%A8%EA%B2%A8%EB%B3%B4%EC%9E%90\" aria-label=\"스프링 api key를 숨겨보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 API Key를 숨겨보자</h1>\n<p>Git을 활용해 개발을 하다보면 API Key값이 노출되는 경우가 종종 있다.</p>\n<p>(<em><a href=\"https://www.gitguardian.com/\">Git Guardian</a>을 통해 무료 진단해보는 것을 추천한다)</em></p>\n<p>오늘은 Spring 설정으로 안전하게 이 값을 숨기고 가져오는 작업을 진행해보자.</p>\n<p><br/><br/></p>\n<hr>\n<h2 id=\"application-property-등록\" style=\"position:relative;\"><a href=\"#application-property-%EB%93%B1%EB%A1%9D\" aria-label=\"application property 등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Application Property 등록</strong></h2>\n<br/>\n<p><code class=\"language-text\">application.properties</code>에 아래 내용을 추가해주자</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\">#API-KEY 위치 설정</span>\nspring.profiles.include=파일명</code></pre></div>\n<p>여기서 파일명은 <code class=\"language-text\">application-파일명.properties</code>가 된다.</p>\n<p><br/><br/></p>\n<p>필자의 파일명은 <code class=\"language-text\">API-KEY</code>이므로</p>\n<p><code class=\"language-text\">application-API-KEY.properties</code> 라는 파일을 생성했고</p>\n<p>위치는 <code class=\"language-text\">application.properties와 같은 위치</code>에 두었다.</p>\n<br/>\n<p><img src=\"/b2b3c8b24b5271c738b83fb9b70dbd5b/newfile.png\" alt=\"newfile.PNG\"></p>\n<p><br/><br/></p>\n<p>파일을 생성했으면</p>\n<p>내용은 <code class=\"language-text\">변수명=Key값</code> 형태로 적으면 되는데,</p>\n<p>이 때, 따옴표 없이 작성하면 된다.</p>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\"># 예시</span>\nTOKEN_ID=값1\nNAVER_API_KEY=값2\n<span class=\"token punctuation\">...</span></code></pre></div>\n<p><br/><br/></p>\n<hr>\n<h2 id=\"api-key값-안전하게-꺼내오기\" style=\"position:relative;\"><a href=\"#api-key%EA%B0%92-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%EA%BA%BC%EB%82%B4%EC%98%A4%EA%B8%B0\" aria-label=\"api key값 안전하게 꺼내오기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>API Key값 안전하게 꺼내오기</strong></h2>\n<br/>\n<p>이제 안전하게 보관한 Key값을 꺼내서 써보도록 하자</p>\n<p>필자는 아래와 같은 형태로 Key값을 사용했었다.</p>\n<p>이 방법의 문제점은 Git에 올렸을 때 Key값이 그대로 노출된다는 점이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConstUtils</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">ConstUtils</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> DISCORD_TOKEN_ID <span class=\"token operator\">=</span> <span class=\"token string\">\"키값\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<br/>\n<p>따라서, 아래와 같이 <code class=\"language-text\">어노테이션</code>으로</p>\n<p>아까 설정파일에서 정의했던 <code class=\"language-text\">환경변수명을 호출</code>하는 방식으로 변경하였다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Value</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DiscordChatBotFactory</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${DISCORD_TOKEN_ID}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> DISCORD_TOKEN_ID<span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>이 때 사용하는 <code class=\"language-text\">@Value</code> 어노테이션은</p>\n<p><u><code class=\"language-text\">lombok</code>이 아니라 <code class=\"language-text\">스프링</code>임에 주의하자.</u></p>\n<p><br/><br/></p>\n<h2 id=\"-마무리-\" style=\"position:relative;\"><a href=\"#-%EB%A7%88%EB%AC%B4%EB%A6%AC-\" aria-label=\" 마무리  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>★ 마무리 ★</h2>\n<br/>\n<p>이 마무리 작업을 하지않는다면</p>\n<p>위에서 한 노룍은 아무 효과가 없는 것과 마찬가지다.</p>\n<br/>\n<p><code class=\"language-text\">.gitignore</code>에 아까 만든 설정파일을 등록해서</p>\n<p>저장소에 올라가지 않도록 해주자</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\"># API KEY 파일 위치</span>\nresources/application<span class=\"token punctuation\">-</span>API<span class=\"token punctuation\">-</span>KEY.properties</code></pre></div>\n<br/>\n<p>또한 Git history에서 Key값이 노출된 내역이 있다면</p>\n<p><a href=\"https://www.gitguardian.com/\">Git Guardian</a>을 통해 확인한 후 정리해주도록 하자.</p>\n<p>정리하는 방법은 3가지가 있다.</p>\n<p><code class=\"language-text\">1. API Key 재발급</code></p>\n<p>Git Guardian 공식문서에서도</p>\n<p>히스토리 정리는 굉장히 조심할 것을 강조하고 있다.</p>\n<p><code class=\"language-text\">API Key 재발급이 가장 안전하고 빠른 방법이다.</code></p>\n<p><br><br></p>\n<p><code class=\"language-text\">2. git filter-branch</code></p>\n<p><a href=\"https://git-scm.com/docs/git-filter-branch\">Git 자체에서 지원하는 기능</a>으로</p>\n<p><code class=\"language-text\">히스토리를 전체 필터링하여 해당 파일을 제거한다.</code></p>\n<p>(로컬 저장소도 포함되므로 주의가 필요하다)</p>\n<br>\n<p>다만, 필자의 경우</p>\n<p>처음부터 Key가 포함되어 있거나,</p>\n<p>파일명이 변경된 경우였고</p>\n<p>잘 작동하지 않았다.</p>\n<p>(만약 아신다면 댓글에 첨부 부탁!)</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> filter-branch -f --index-filter <span class=\"token string\">'git rm --cached --ignore-unmatch 파일명'</span> --prune-empty --all</code></pre></div>\n<ol start=\"3\">\n<li>\n<p>BFG repo-cleaner</p>\n<p>2번 방법보다 속도가 더 빠른 방법이다.</p>\n<p>오픈소스로 제공된 프로젝트로</p>\n<p><code class=\"language-text\">프로젝트를 clone한 뒤</code></p>\n<p>히스토리 상에서</p>\n<p>해당 파일, 문자열을 전부 삭제한 뒤</p>\n<p><code class=\"language-text\">재커밋하는 방식을 취한다.</code></p>\n<p>사용법은 <a href=\"https://rtyley.github.io/bfg-repo-cleaner/\">여기서</a> 참고하자</p>\n<p>(JAVA 8버전 이상의 JRE가 필요하다)</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#1. 프로젝트를 빈 폴더에 새로 clone한다.</span>\n<span class=\"token function\">git</span> clone https:/저장소 주소.git\n\n<span class=\"token comment\">#2. bfg 파일과 삭제할 문자열을 clone 위치에 넣고 </span>\n<span class=\"token comment\">#   아래 명령어 실행</span>\njava -jar bfg.jar -rt delete.txt <span class=\"token builtin class-name\">.</span>\n\n<span class=\"token comment\">#3 처리가 끝났다면 아래 명령어 실행</span>\n<span class=\"token function\">git</span> reflog expire --expire<span class=\"token operator\">=</span>now --all <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> gc --prune<span class=\"token operator\">=</span>now --aggressive\n</code></pre></div>\n<p><br/><br/></p>\n<p><em>출처</em></p>\n<p><em><a href=\"https://velog.io/@sv002/git-filter-branch-%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC-%ED%95%84%ED%84%B0%EB%A7%81\">sv002님 블로그</a></em></p>\n<p><em><a href=\"https://nato-blog.tistory.com/127\">nato님 블로그</a></em></p>\n<br/>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#application-property-%EB%93%B1%EB%A1%9D\"><strong>Application Property 등록</strong></a></li>\n<li><a href=\"#api-key%EA%B0%92-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%EA%BA%BC%EB%82%B4%EC%98%A4%EA%B8%B0\"><strong>API Key값 안전하게 꺼내오기</strong></a></li>\n<li><a href=\"#-%EB%A7%88%EB%AC%B4%EB%A6%AC-\">★ 마무리 ★</a></li>\n</ul>\n</div>","excerpt":"지적과 댓글은 언제나 환영합니다!  스프링 API Key를 숨겨보자 Git을 활용해 개발을 하다보면 API Key값이 노출되는 경우가 종종 있다. (Git Guardian을 통해 무료 진단해보는 것을 추천한다) 오늘은 Spring 설정으로 안전하게 이 값을 숨기고 가져오는 작업을 진행해보자.  Application Property 등록 에 아래 내용을 추가해주자 여기서 파일명은 가 된다.  필자의 파일명은 이므로  라는 파일을 생성했고 위치는 에 두었다. newfile.PNG  파일을 생성했으면 내용은  형태로 적으면 되는데, 이 때, 따옴표 없이 작성하면 된다.  API Key값 안전하게 꺼내오기 이제 안전하게 보관한 Key값을 꺼내서 써보도록 하자 필자는 아래와 같은 형태로 Key값을 사용했었다. 이 방법의 문제점은 Git에 올렸을 때 Key값이 그대로 노출된다는 점이다. 따라서, 아래와 같이 으로 아까 설정파일에서 정의했던 하는 방식으로 변경하였다. 이 때 사용하는  어노테이…","frontmatter":{"date":"August 29, 2022","title":"스프링 API Key를 숨겨보자","categories":"Spring","author":"주녁","emoji":"🔮"},"fields":{"slug":"/Spring-hide-api-key/"}},"next":{"id":"3b09180e-c023-5162-a15c-b9eb1419dedd","html":"<p>지적과 댓글은 언제나 환영합니다!</p>\n<br>\n<h2 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h2>\n<p>공학자로써 단어의 정의는 굉장히 중요하다.</p>\n<p>오늘은 논쟁이 굉장히 많은 주제이자, 헷갈리기 쉬운 주제인</p>\n<p>REST와 REST API, RESTful API에 대해 알아보도록 하자.</p>\n<br>\n<hr>\n<h2 id=\"범위\" style=\"position:relative;\"><a href=\"#%EB%B2%94%EC%9C%84\" aria-label=\"범위 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>범위</h2>\n<p>정의를 살펴보기에 앞서 범위를 살펴보고 가자.</p>\n<p><del>직접 그린 그림이다</del></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABjElEQVQoz31S2W7jMAzM/3/dvnWBtI3TOHHaWj50kKIOz0JyYCTpogMQoK4hqZkdCvICM2s4Y2v+G5Zl+RH3+7uymLzFS7PH67nBJBY6EkwN3mIODjrQr0UKdoMYnFlhSg5DtOhFQ4lBxwNa6tGSqudl7ypjPScK0M5DWw/y4YF4d2GFkNNDRRc9KAkkR0gO4BRA2cOQx5/2A5NmzNZjNh5qIlx7jRBXjl3HIzjJVmEKFj6FH2MVspdLhw/6rusYA3JOWJYMCQmXrxk5L4VwqB0UlG7K39VcBMfjEU3TgJigRoIWwoE/q4Cvb284nU5o27a0AscBw0zPhHEjLBjHEV3X1QdqcJXw3V0RJWC/3+NwOFTSAkuCcSUctxHXkd32BQ8js8ffS4ej/brdzVjKyDmDJdaRqyhFQXoicOkmSgq1WCnAWTA6V0UpnRRhJsNQk8NnbxBTXkUpD0/Uo5cZ334NJfrONv3NNhpnr2ox5gjjfA0v8dE2JUlLvjMz1dxGho3+Flz34pO9/mfsfwOfV2rkjN2fAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"벤다이어그램\"\n        title=\"벤다이어그램\"\n        src=\"/static/f8399a008535f7e13cdfec87f91efd0e/37523/Venn-Diagram.png\"\n        srcset=\"/static/f8399a008535f7e13cdfec87f91efd0e/e9ff0/Venn-Diagram.png 180w,\n/static/f8399a008535f7e13cdfec87f91efd0e/f21e7/Venn-Diagram.png 360w,\n/static/f8399a008535f7e13cdfec87f91efd0e/37523/Venn-Diagram.png 720w,\n/static/f8399a008535f7e13cdfec87f91efd0e/4971b/Venn-Diagram.png 784w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 그림을 기준으로 살펴보면</p>\n<p><code class=\"language-text\">REST</code>는 어떠한 개념이고,</p>\n<p><code class=\"language-text\">RESTful API</code>는 완전히 REST에 속한 것으로 보인다.</p>\n<p>반면, <code class=\"language-text\">HTTP API</code>는 <code class=\"language-text\">REST API</code>랑 유사하다고 적혀있고</p>\n<p><code class=\"language-text\">REST, RESTful API</code>와 일부 공통점이 있어보인다.</p>\n<br/>\n<p>그렇다면 각각 어떤 정의길래 위와 같은 그림이 나오는 것일까?</p>\n<br/>\n<hr>\n<h2 id=\"정의\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EC%9D%98\" aria-label=\"정의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정의</h2>\n<br/>\n<p>요약하면 다음과 같다.</p>\n<p><code class=\"language-text\">REST</code> : 분산 하이퍼미디어 시스템을 위한 아키텍쳐 요소를 추상화 한 것.</p>\n<p><code class=\"language-text\">RESTful API</code> : REST 개념을 잘 지킨 API.</p>\n<p><code class=\"language-text\">HTTP API</code> ≒ <code class=\"language-text\">REST API</code> : REST 개념을 기반으로 한 API. (REST 개념을 일부만 따른다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">여기서 `REST API`의 정의에 대한 논쟁이 발생한다. (이후 서술)</code></pre></div>\n<br/>\n<p>REST의 정의가 추상적이라서 잘 이해가 가지 않을 것이다.</p>\n<p>좀 더 자세히 들여다보자.</p>\n<br/>\n<hr>\n<h2 id=\"restrepresentational-state-transfer\" style=\"position:relative;\"><a href=\"#restrepresentational-state-transfer\" aria-label=\"restrepresentational state transfer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REST(Representational State Transfer)</h2>\n<br/>\n<p>REST 개념을 창시한 <code class=\"language-text\">로이 필딩(Roy Fielding)</code>은</p>\n<p>REST를 다음과 같이 정의했다.</p>\n<blockquote>\n<p>REST(Representational State Transfer)란</p>\n<p><code class=\"language-text\">분산 하이퍼미디어 시스템(=웹)</code>을 위한</p>\n<p><code class=\"language-text\">아키텍쳐 요소를 추상화 한 것</code>이다.</p>\n</blockquote>\n<details>\n    <summary>(원문참조) Representational State Transfer (REST) style</summary>\n<blockquote>\n<p>The Representational State Transfer (REST) style is an abstraction of the architectural elements within a distributed hypermedia system.</p>\n<div style=\"text-align: right\">- Architectural Styles and the Design of Network-based Software Architectures (Roy Thomas Fielding, 2000)<div>\n</blockquote>\n</details>\n<details>\n    <summary>(용어심화) 분산 하이퍼미디어 시스템</summary>\n<ul>\n<li>\n<p>이 논문에서는 대표적으로 Web을 의미한다.</p>\n</li>\n<li>\n<p>원문(정확한 정의를 찾기 어려워서 논문에서 사용된 문장으로 갈음했다.)_</p>\n</li>\n</ul>\n<blockquote>\n<p>Distributed hypermedia provides a uniform means of accessing services through the embedding of action controls within the presentation of information retrieved from remote sites.</p>\n <div style=\"text-align: right\">- Architectural Styles and the Design of Network-based Software Architectures (Roy Thomas Fielding, 2000)<div>\n</blockquote>\n<br>\n<ul>\n<li>해석하자면 다음과 같다.</li>\n</ul>\n<blockquote>\n<p>분산 하이퍼미디어는 원격 사이트에서 검색된 정보 표시 내에 작업 제어를 포함하여 서비스에 액세스하는 균일한 수단을 제공한다.</p>\n</blockquote>\n</details>\n<details>\n    <summary>(용어심화) 아키텍쳐 요소 추상화</summary>\n<ul>\n<li>\n<p>이 논문에서 <code class=\"language-text\">아키텍쳐 스타일</code>과 같은 의미로 사용되었다.</p>\n</li>\n<li>\n<p>원문은 아래와 같다</p>\n</li>\n</ul>\n<blockquote>\n<p>An architectural style is a coordinated set of architectural constraints that restricts the roles/features of architectural elements and the allowed relationships among those elements within any architecture that conforms to that style.</p>\n <div style=\"text-align: right\">- Architectural Styles and the Design of Network-based Software Architectures (Roy Thomas Fielding, 2000)<div>\n</blockquote>\n<ul>\n<li>해석하자면 다음과 같다.</li>\n</ul>\n<blockquote>\n<p>아키텍처 스타일은 아키텍처 제약 조건의 조정된 집합이다. 아키텍처 요소의 역할/기능을 제한하고 허용되는 모든 아키텍처 내에서 해당 요소 간의 관계는 해당 스타일을 따른다.</p>\n</blockquote>\n</details>\n<br/>\n<p>즉, REST는 아키텍쳐 스타일(제약조건)이자, 아키텍쳐 스타일의 집합인 것이다.</p>\n<p>REST를 구성하는 스타일은 6가지가 있다.</p>\n<p>이를 모두 지켜야만 REST라고 논문저자는 강조하고 있다.</p>\n<br/>\n<hr>\n<h2 id=\"rest의-조건-6가지\" style=\"position:relative;\"><a href=\"#rest%EC%9D%98-%EC%A1%B0%EA%B1%B4-6%EA%B0%80%EC%A7%80\" aria-label=\"rest의 조건 6가지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REST의 조건 6가지</h2>\n<br>\n<p>로이 필딩의 논문에 따르면</p>\n<p>REST는 다음 6가지 스타일(제약조건)을 지켜야</p>\n<p>REST라고 부를 수 있다고 주장했다.</p>\n<br>\n<ol>\n<li>\n<p><code class=\"language-text\">Client-Server</code> 구조 : 자원 요청자 &#x3C;-> 제공자의 역할 분담.</p>\n</li>\n<li>\n<p><code class=\"language-text\">Stateless</code> : 무상태성, 상태저장 X</p>\n</li>\n<li>\n<p><code class=\"language-text\">Cache</code> : 네트워크 효율성을 위한 캐시 응답 가능.</p>\n</li>\n<li>\n<p><a href=\"#Uniform\">Uniform interface</a></p>\n</li>\n<li>\n<p><code class=\"language-text\">Layered System</code> : 프록시 서버, 로드 밸런싱 등 다중계층 사용가능.</p>\n</li>\n<li>\n<p><code class=\"language-text\">Code-on-demand</code>(Optional) : 서버에서 보낸 코드를 클라이언트에서 스크립트 형태로 실행가능.</p>\n</li>\n</ol>\n<br/>\n<p>HTTP 스펙을 따른다면</p>\n<p><code class=\"language-text\">4. Uniform interface</code> 항목을 제외하고 대부분 지켜진다.</p>\n<p>이 때문에 HTTP API는 REST를 일부 준수하는 API라고 할 수 있고,</p>\n<p>일반적으로 사용하는 REST API의 뜻은 HTTP API를 의미한다.</p>\n<p><code class=\"language-text\">논문의 저자는 REST API라고 사용하지 말 것을 주장하므로 유의가 필요하다.</code></p>\n<br/>\n<p>한편 제시된 6가지의 스타일에 따라,</p>\n<p>API 중에서 <u>6가지를 모두 만족하면</u> <code class=\"language-text\">RESTful API</code>라고 할 수 있다.</p>\n<br/>\n<hr>\n<h2 id=\"핵심-스타일-uniform-interface-span-iduniformspan\" style=\"position:relative;\"><a href=\"#%ED%95%B5%EC%8B%AC-%EC%8A%A4%ED%83%80%EC%9D%BC-uniform-interface-span-iduniformspan\" aria-label=\"핵심 스타일 uniform interface span iduniformspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>핵심 스타일 Uniform interface <span id=\"Uniform\"></span></h2>\n<br>\n<p>이 항목은 4개의 제약조건으로 구성되어 있다.</p>\n<ol>\n<li>\n<p><code class=\"language-text\">Identification of resources</code></p>\n<p>= 리소스가 URI로 식별 가능해야 한다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">Manipulation of resources through representations</code></p>\n<p>= 리소스를 representation 전송으로 조작해야 한다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">Self-descriptive messages</code></p>\n<p>= 자기서술적인 메시지를 가져야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> 요청(Request)과 응답(Response) 메시지의 각 항목이\n 어떤 의미인지까지 모두 알수있도록 \n 명세나 문서가 있어야 OK.\n \n ex) message content가 JSON이면, JSON의 각 항목의 의미를 모두 적어야 한다.</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    HTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">200</span> OK\n    Content-Type<span class=\"token operator\">:</span> application/json\n    Link<span class=\"token operator\">:</span> &lt;https<span class=\"token operator\">:</span><span class=\"token comment\">//명세문서주소>; rel=\"profile\"</span>\n    <span class=\"token punctuation\">{</span><span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"john doe\"</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">HATEOAS</code>(Hypermedia as the engine of application state)</p>\n<p>= 하이퍼링크를 통해 어플리케이션의 상태 전이가 가능해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> 응답(Response) 메시지에 \n 다음 상태로 이동가능한 Hypermedia(링크)가 있어야 한다.</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"self\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:8080/api/article/1000\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 현재 api 주소</span>\n        <span class=\"token property\">\"next\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:8080/api/article/1001\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 다음 article을 조회하는 URI</span>\n        <span class=\"token property\">\"comment\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:8080/api/article/comment\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// article의 댓글 달기</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<br/>\n<hr>\n<h2 id=\"이렇게까지-구현해야하는가\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%A0%87%EA%B2%8C%EA%B9%8C%EC%A7%80-%EA%B5%AC%ED%98%84%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94%EA%B0%80\" aria-label=\"이렇게까지 구현해야하는가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이렇게까지 구현해야하는가?</h2>\n<br>\n<p>논문 저자 <code class=\"language-text\">로이 필딩(Roy Fielding)</code>은</p>\n<p>꾸준히 REST에 대한 논의를 펼치면서</p>\n<p>다음과 같은 내용을 남겼다.</p>\n<blockquote>\n<p>시스템을 통제할 수 있다고 생각한다면</p>\n<p>REST에 시간을 낭비하지 말라!</p>\n</blockquote>\n<br>\n<p>또한, 논문에도 같은 의미의 내용을 확인할 수 있다.</p>\n<blockquote>\n<p>Uniform Interface 제약조건은 비효율적이다.</p>\n<p>이 방식은 표준화된 방식을 강요하기 때문에</p>\n<p>상황에 따라 최적이 아닐 수 있다.</p>\n</blockquote>\n<br>\n<hr>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<br>\n<p>이번 포스팅에서는</p>\n<p>REST의 개념과 범위에 대해서 알아보았다.</p>\n<p>REST가 꼭 필요한 경우라면 RESTful하게 구현해야겠지만</p>\n<p>그렇지 않은 경우 REST를 일부 준수하는 HTTP API로 구현하도록 하자.</p>\n<p>+ 용어 사용에 신중을 기해서 사용하도록 하자!</p>\n<hr>\n<p><em>출처</em></p>\n<p><em><a href=\"https://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdf\">Architectural Styles and the Design of Network-based Software Architectures (Roy Thomas Fielding, 2000)</a></em></p>\n<p><em><a href=\"https://www.youtube.com/watch?v=RP_f5dMoHFc&#x26;list=WL&#x26;index=36\">그런 REST API로 괜찮은가 (이응준님, DEV 2017 발표)</a></em></p>\n<p><em><a href=\"https://www.youtube.com/watch?v=iOueE9AXDQQ&#x26;list=WL&#x26;index=37\">REST API가 뭔가요? (얄팍한 코딩사전님)</a></em></p>\n<p><em><a href=\"https://www.youtube.com/watch?v=Nxi8Ur89Akw&#x26;list=WL&#x26;index=64\">[10분 테코톡] 정의 REST API (정 님, 우아한테크코스 백엔드 4기)</a></em></p>\n<br/>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EA%B0%9C%EC%9A%94\">개요</a></li>\n<li><a href=\"#%EB%B2%94%EC%9C%84\">범위</a></li>\n<li><a href=\"#%EC%A0%95%EC%9D%98\">정의</a></li>\n<li><a href=\"#restrepresentational-state-transfer\">REST(Representational State Transfer)</a></li>\n<li><a href=\"#rest%EC%9D%98-%EC%A1%B0%EA%B1%B4-6%EA%B0%80%EC%A7%80\">REST의 조건 6가지</a></li>\n<li><a href=\"#%ED%95%B5%EC%8B%AC-%EC%8A%A4%ED%83%80%EC%9D%BC-uniform-interface-span-iduniformspan\">핵심 스타일 Uniform interface <span id=\"Uniform\"></span></a></li>\n<li><a href=\"#%EC%9D%B4%EB%A0%87%EA%B2%8C%EA%B9%8C%EC%A7%80-%EA%B5%AC%ED%98%84%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94%EA%B0%80\">이렇게까지 구현해야하는가?</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 23, 2022","title":"REST, REST API, RESTful API의 차이를 아시나요?","categories":"knowledge","author":"주녁","emoji":"🔮"},"fields":{"slug":"/about-rest/"}},"prev":{"id":"5b921afe-b7ae-5f7a-b57d-6e1aa02ca796","html":"<p>지적과 댓글은 언제나 환영합니다!</p>\n<p><br/><br/></p>\n<h1 id=\"스프링-로그log를-파일로-남겨보자\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%A1%9C%EA%B7%B8log%EB%A5%BC-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EB%82%A8%EA%B2%A8%EB%B3%B4%EC%9E%90\" aria-label=\"스프링 로그log를 파일로 남겨보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 로그(Log)를 파일로 남겨보자</h1>\n<br/>\n<h2 id=\"로그는-왜-쓸까\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EB%8A%94-%EC%99%9C-%EC%93%B8%EA%B9%8C\" aria-label=\"로그는 왜 쓸까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>로그는 왜 쓸까?</strong></h2>\n<p>로그는 소프트웨어의 이벤트를 기록하는 것으로</p>\n<p>Debug나 단순 콘솔 출력(print)에 비해 아래와 같은 장점이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. 자유로운 출력 위치와 형식\n2. 로그 레벨*에 따라 메시지 분리 가능\n    *Log Level : Fatal, Error, Warn, Debug, Info 등...\n3. 큰 코드 변경없이 환경조성 가능</code></pre></div>\n<br>\n<p>그렇다면 스프링에서 로그에 대해 어떤 방법을 사용할 수 있을까?</p>\n<br>\n<hr>\n<h2 id=\"두-가지-선택지\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EA%B0%80%EC%A7%80-%EC%84%A0%ED%83%9D%EC%A7%80\" aria-label=\"두 가지 선택지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 가지 선택지</h2>\n<br>\n<p>2022년 현재, 스프링에서 가장 널리 쓰이는 인터페이스는</p>\n<p>slf4j이다.</p>\n<p><code class=\"language-text\">라이브러리</code>가 아니라 <code class=\"language-text\">인터페이스</code>이다.</p>\n<p>이 slf4j를 기반으로 구현한 <code class=\"language-text\">라이브러리</code>는</p>\n<p>대표적으로 <code class=\"language-text\">logback</code>과 <code class=\"language-text\">log4j2</code>가 있다.</p>\n<p>간략하게 차이점을 알아보자면</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">logback : Spring boot 기본 내장, 서버 재시작없이 설정변경 가능\n\nlog4j2 : 비동기 로그 출력 가능, 지연 연산* 가능, 멀티 쓰레드에서 우수함\n    *지연 연산(Lazy Evaluation) : 값 계산을 실행 직전까지 최대한 늦추는 기법</code></pre></div>\n<br>\n<p>자, 그렇다면 스프링에서 어떻게 사용할 수 있을까?</p>\n<br>\n<hr>\n<h2 id=\"실제-사용해보자\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%A0%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"실제 사용해보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실제 사용해보자</h2>\n<br>\n<p>필자는 스프링에서 아래와 같이 사용하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PingPongService</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ChatBotService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageTemplate</span><span class=\"token punctuation\">></span></span> makeResponse<span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"content = {}\"</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드에서 딱 2가지만 확인하면 된다.</p>\n<p>첫 시작의 <code class=\"language-text\">@Slf4j</code>와 <code class=\"language-text\">log.info()</code>다.</p>\n<br>\n<p><code class=\"language-text\">@Slf4j</code> 어노테이션은 인터페이스로써</p>\n<p>현재 클래스에 큰 구조 변경없이 log 구현체를 추가해준다.</p>\n<p>(이 때, <code class=\"language-text\">logback 구현체가 default</code>로 사용된다.)</p>\n<br>\n<p>즉, <code class=\"language-text\">log</code>라는 멤버변수를 통해</p>\n<p><code class=\"language-text\">log.info()</code>, <code class=\"language-text\">log.debug()</code>, <code class=\"language-text\">log.error()</code> 등</p>\n<p><code class=\"language-text\">로그 관련 함수를 사용</code>할 수 있게 된다.</p>\n<p><img src=\"/f57387d03b2b49c72de717944123f530/log.png\" alt=\"결과화면\"></p>\n<p>위 결과화면을 보면 로그가 잘 출력된다.</p>\n<p>(의미는 조금 뒤에!)</p>\n<br>\n<p>그렇지만 한눈에 안들어오기도, 조금 심심하기도 하다.</p>\n<p>좋은 방법이 없을까?</p>\n<br/>\n<h2 id=\"로그에-색을-입혀보자\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%97%90-%EC%83%89%EC%9D%84-%EC%9E%85%ED%98%80%EB%B3%B4%EC%9E%90\" aria-label=\"로그에 색을 입혀보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>로그에 색을 입혀보자</strong></h2>\n<p><code class=\"language-text\">application.properties</code>에 가서</p>\n<p>아래 옵션을 넣어보자</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\">#로그 색상 출력</span>\nspring.output.ansi.enabled=always</code></pre></div>\n<br>\n<p><img src=\"/46f96e00b2ba776567d5140443238289/log2.png\" alt=\"결과2\"></p>\n<p>어떠한가?</p>\n<p>로그가 한눈에 잘 들어온다.</p>\n<p>로그의 의미를 살펴보자면</p>\n<p>일반적으로 왼쪽부터 순서대로</p>\n<p><code class=\"language-text\">시간</code> - <code class=\"language-text\">로그레벨</code> - <code class=\"language-text\">프로세스번호</code> - <code class=\"language-text\">실행위치(클래스)</code> - <code class=\"language-text\">로그내용</code> 이다.</p>\n<p>색상과 순서를 변경할 수 있기도 하고,</p>\n<p>의미는 명확하기 때문에 어떤 항목이 있는지만 알면 된다.</p>\n<p><code class=\"language-text\">(외울 필요 X)</code></p>\n<br>\n<p>한편, 이런 생각을 해보자</p>\n<p>이 로그를 항상 쳐다보고 있어야 하는걸까?</p>\n<p>한달 전 로그를 다시 볼 순 없을까?</p>\n<br>\n<hr>\n<h2 id=\"로그를-파일로-출력해보자\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EB%A5%BC-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EC%B6%9C%EB%A0%A5%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"로그를 파일로 출력해보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>로그를 파일로 출력해보자</strong></h2>\n<br>\n<p><code class=\"language-text\">application.properties</code>와 같은 위치에</p>\n<p><code class=\"language-text\">logback.xml</code>파일을 새로 만들어준다.</p>\n<p>(<code class=\"language-text\">logback</code>이라는 이름에 따라서 설정이 적용되므로 주의하자)</p>\n<br>\n<p>아래 코드는 필자가 사용하는 <code class=\"language-text\">logback 설정</code>이다.</p>\n<p>하나씩 의미를 알아보자</p>\n<br>\n<h3 id=\"기본-설정-및-code-classlanguage-text라이브-리로드code\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%EC%84%A4%EC%A0%95-%EB%B0%8F-code-classlanguage-text%EB%9D%BC%EC%9D%B4%EB%B8%8C-%EB%A6%AC%EB%A1%9C%EB%93%9Ccode\" aria-label=\"기본 설정 및 code classlanguage text라이브 리로드code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 설정 및 <code class=\"language-text\">라이브 리로드</code></h3>\n<br>\n<p><code class=\"language-text\">configuration</code> 태그에 <code class=\"language-text\">라이브 리로드</code> 설정을 해줄 수 있다.</p>\n<p>서버 재시작 없이 로그 관련 설정을 갱신해준다.</p>\n<p>설정 변경 스캔 주기를 설정할 수 있다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span> <span class=\"token attr-name\">scan</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">scanPeriod</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>30 seconds<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!--여기에 내용 삽입 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<br>\n<p><code class=\"language-text\">configuration</code> 태그 안에</p>\n<p>후에 나올 내용들을 넣어주면 된다.</p>\n<p>(직접 해보길 추천한다.)</p>\n<br>\n<h3 id=\"code-classlanguage-text콘솔-출력code-정의\" style=\"position:relative;\"><a href=\"#code-classlanguage-text%EC%BD%98%EC%86%94-%EC%B6%9C%EB%A0%A5code-%EC%A0%95%EC%9D%98\" aria-label=\"code classlanguage text콘솔 출력code 정의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">콘솔 출력</code> 정의</h3>\n<br>\n<p><code class=\"language-text\">STDOUT</code>이라는 이름으로 <code class=\"language-text\">출력할 형식(appender)</code>을 정의했다.</p>\n<p><code class=\"language-text\">ConsoleAppender</code>로 콘솔에 출력하도록 했다.</p>\n<p><code class=\"language-text\">STDOUT</code>에 사용할 <code class=\"language-text\">메시지 형식(pattern)</code>을 정의했다.</p>\n<p><code class=\"language-text\">pattern</code>은 날짜 - 레벨 - 클래스 - 메시지 순이다.</p>\n<p>(색상지정 등 자세한 설명은 <a href=\"https://logback.qos.ch/manual/layouts.html#coloring\">공식문서 참조</a>)</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">    <span class=\"token comment\">&lt;!-- 콘솔 로그 설정 --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>STDOUT<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.ConsoleAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoder</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pattern</span><span class=\"token punctuation\">></span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} %highlight(%-5level) %cyan(%logger{15}) : %msg%n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pattern</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoder</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<br>\n<h3 id=\"code-classlanguage-text파일-출력code-정의\" style=\"position:relative;\"><a href=\"#code-classlanguage-text%ED%8C%8C%EC%9D%BC-%EC%B6%9C%EB%A0%A5code-%EC%A0%95%EC%9D%98\" aria-label=\"code classlanguage text파일 출력code 정의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">파일 출력</code> 정의</h3>\n<br>\n<p><code class=\"language-text\">LOGS_ABSOLUTE_PATH</code>라는 이름으로 출력 위치를 정해주었다.</p>\n<p><code class=\"language-text\">FILE</code>이라는 형식(appender)을 정의헀다.</p>\n<p><code class=\"language-text\">RollingFileAppender</code>로 파일에 출력하도록 했다.</p>\n<p><code class=\"language-text\">ThresholdFilter</code>필터로 DEBUG 레벨 이상만 출력하도록 헀다.</p>\n<p><code class=\"language-text\">file</code> 위치와 이름을 정해주었다.</p>\n<p><code class=\"language-text\">rollingPolicy</code>로 <code class=\"language-text\">TimeBasedRollingPolicy</code>를 지정했는데</p>\n<p>이는 1개당 최대 100MB의 파일로 <code class=\"language-text\">(maxFileSize)</code></p>\n<p>최대 30개까지 로그를 유지하고 <code class=\"language-text\">(maxHistory)</code></p>\n<p>총합 3GB를 넘지 않도록 설정했다. <code class=\"language-text\">(totalSizeCap)</code></p>\n<p><code class=\"language-text\">메시지 형식(pattern)</code>도 로그레벨 - 날짜 - 클래스 - 메시지 순으로 정의했다.</p>\n<p><code class=\"language-text\">이 때는 텍스트 파일 출력이므로, 색상을 지정할 수 없다.</code></p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">    <span class=\"token comment\">&lt;!-- 파일 로그 설정 --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>LOGS_ABSOLUTE_PATH<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>./logs<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>filter</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.classic.filter.ThresholdFilter<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>level</span><span class=\"token punctuation\">></span></span>DEBUG<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>level</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>filter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>file</span><span class=\"token punctuation\">></span></span>${LOGS_ABSOLUTE_PATH}/logback.log<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>file</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rollingPolicy</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token comment\">&lt;!-- rollover daily --></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>${LOGS_ABSOLUTE_PATH}/logback-%d{yyyy-MM-dd}.%i.log<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxHistory</span><span class=\"token punctuation\">></span></span>30<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxHistory</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>3GB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>timeBasedFileNamingAndTriggeringPolicy</span>\n                    <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                <span class=\"token comment\">&lt;!-- or whenever the file size reaches 100MB --></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxFileSize</span><span class=\"token punctuation\">></span></span>100MB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxFileSize</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>timeBasedFileNamingAndTriggeringPolicy</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rollingPolicy</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoder</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pattern</span><span class=\"token punctuation\">></span></span>[%-5level] %d{HH:mm:ss.SSS} %logger{36} - %msg%n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pattern</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoder</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<br>\n<h3 id=\"출력-설정\" style=\"position:relative;\"><a href=\"#%EC%B6%9C%EB%A0%A5-%EC%84%A4%EC%A0%95\" aria-label=\"출력 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>출력 설정</h3>\n<p>기본적으로 출력할 로그레벨은 <code class=\"language-text\">DEBUG</code> 이상으로 지정했다.</p>\n<p>이 때, 위에서 정의한 <code class=\"language-text\">STDOUT</code>형식으로 콘솔 출력을,</p>\n<p><code class=\"language-text\">FILE</code> 형식으로 파일 출력을 할 수 있도록 했다.</p>\n<p>logger는 특정 패키지에만 적용할 수 있도록 하는 부분이다.</p>\n<p><code class=\"language-text\">응용하면 특정 패키지의 로그만 특정 파일에 출력하도록 할 수 있다.</code></p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>root</span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>DEBUG<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!--     참조할 appender 설정 - STDOUT --></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>STDOUT<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>root</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token comment\">&lt;!-- log 레벨 설정 (org.springframework=debug)\n    &lt;logger name=\"org.springframework\" level=\"DEBUG\">\n        &lt;appender-ref ref=\"FILE\" />\n    &lt;/logger>\n    --></span></code></pre></div>\n<br>\n<h3 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h3>\n<p>logback.xml 완성 후 Spring을 실행해보면</p>\n<p>최상위 위치에 <code class=\"language-text\">./logs</code> 폴더가 생기고</p>\n<p>로그가 파일로 저장되는 것을 확인할 수 있다.</p>\n<p>추가적으로 개발 환경마다(local, dev, product 등)</p>\n<p>로그를 다르게 세팅하는 것도 가능하다.</p>\n<p>한편, 오픈소스인 <code class=\"language-text\">LogStash</code>를 사용하면</p>\n<p>네트워크를 통해 로그를 저장하는 것도 가능하다.</p>\n<p>(추후 포스팅 예정)</p>\n<p><em>출처</em></p>\n<p><em><a href=\"https://loosie.tistory.com/829\">loosie님 블로그</a></em></p>\n<p><em><a href=\"https://minkwon4.tistory.com/161\">minkwon4님 블로그</a></em></p>\n<p>_<a href=\"https://www.fwantastic.com/2019/12/javautillogging-vs-log4j-vs-slf4j.html\">fwantastic님 블로그</a>\n<br/></p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%A1%9C%EA%B7%B8%EB%8A%94-%EC%99%9C-%EC%93%B8%EA%B9%8C\"><strong>로그는 왜 쓸까?</strong></a></p>\n</li>\n<li>\n<p><a href=\"#%EB%91%90-%EA%B0%80%EC%A7%80-%EC%84%A0%ED%83%9D%EC%A7%80\">두 가지 선택지</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%EC%A0%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90\">실제 사용해보자</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A1%9C%EA%B7%B8%EC%97%90-%EC%83%89%EC%9D%84-%EC%9E%85%ED%98%80%EB%B3%B4%EC%9E%90\"><strong>로그에 색을 입혀보자</strong></a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A1%9C%EA%B7%B8%EB%A5%BC-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EC%B6%9C%EB%A0%A5%ED%95%B4%EB%B3%B4%EC%9E%90\"><strong>로그를 파일로 출력해보자</strong></a></p>\n<ul>\n<li><a href=\"#%EA%B8%B0%EB%B3%B8-%EC%84%A4%EC%A0%95-%EB%B0%8F-%EB%9D%BC%EC%9D%B4%EB%B8%8C-%EB%A6%AC%EB%A1%9C%EB%93%9C\">기본 설정 및 <code class=\"language-text\">라이브 리로드</code></a></li>\n<li><a href=\"#%EC%BD%98%EC%86%94-%EC%B6%9C%EB%A0%A5-%EC%A0%95%EC%9D%98\"><code class=\"language-text\">콘솔 출력</code> 정의</a></li>\n<li><a href=\"#%ED%8C%8C%EC%9D%BC-%EC%B6%9C%EB%A0%A5-%EC%A0%95%EC%9D%98\"><code class=\"language-text\">파일 출력</code> 정의</a></li>\n<li><a href=\"#%EC%B6%9C%EB%A0%A5-%EC%84%A4%EC%A0%95\">출력 설정</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"August 30, 2022","title":"스프링 로그를 파일로 남겨보자(logback, Slf4j)","categories":"Spring","author":"주녁","emoji":"🔮"},"fields":{"slug":"/Spring-create-log-files/"}},"site":{"siteMetadata":{"siteUrl":"https://www.junwork.net","comments":{"utterances":{"repo":"junwork123/blog-comments"}}}}},"pageContext":{"slug":"/Spring-hide-api-key/","nextSlug":"/about-rest/","prevSlug":"/Spring-create-log-files/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}